<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Messaging API | Documentation</title>
    <meta name="description" content="ServiceStack Docs">
    <link rel="stylesheet" href="/assets/style.5867b24d.css">
    <link rel="modulepreload" href="/assets/Home.6134f431.js">
    <link rel="modulepreload" href="/assets/TypeSenseDialog.fdc375ae.js">
    <link rel="modulepreload" href="/assets/KeyboardEvents.ed5ef1ba.js">
    <link rel="modulepreload" href="/assets/servicestack-mqclients.b6ea907e.js">
    <link rel="modulepreload" href="/assets/servicestack-logical-view-02.c9437c74.js">
    <link rel="modulepreload" href="/assets/app.da189b1e.js">
    <link rel="modulepreload" href="/assets/messaging.md.5a61125f.lean.js">
    <link rel="modulepreload" href="/assets/app.da189b1e.js">
    <script src="/custom.js"></script>
    <meta name="twitter:title" content="Messaging API | Documentation">
    <meta property="og:title" content="Messaging API | Documentation">
  </head>
  <body>
    <div id="app"><div><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Documentation, back to home" data-v-675d8756 data-v-4a583abe><!----> Documentation</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://servicestack.net/whatsnew" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>What&#39;s New <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><button class="flex rounded-full p-0 bg-gray-100 border-solid border-gray-100 text-gray-400 cursor-pointer hover:border-green-400 hover:bg-white hover:text-gray-600"><svg class="w-7 h-7 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-lg mr-1">Search</span><span style="opacity:1;" class="hidden sm:block text-gray-400 text-sm leading-5 py-0 px-1.5 my-0.5 mr-1.5 border border-gray-300 border-solid rounded-md"><span class="sr-only">Press </span><kbd class="font-sans">/</kbd><span class="sr-only"> to search</span></span></button><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://servicestack.net/whatsnew" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>What&#39;s New <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Overview</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/why-servicestack">Why ServiceStack</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/architecture-overview">Architecture Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/servicify">Servicify existing Systems</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/explore-servicestack">Explore ServiceStack</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Releases</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/releases/v6">Latest Release Notes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/release-notes-history">Release Notes History</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/myget">Pre-release MyGet Packages</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Getting Started</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/create-your-first-webservice">Create your first WebService</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/your-first-webservice-explained">Your first WebService explained</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api-design">Service API Design</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/service-return-types">Service Return Types</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/design-rest-services">Design RESTful Services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/design-message-based-apis">Design Message-based APIs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/modular-startup">Modular Startup</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/navigation">Unified Navigation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/dotnet-tool">dotnet tool - Win/Mac/Linux Utility Belt</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore-windows-desktop">app tool - .NET Core Windows Desktop</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/mix-tool">mix tool - Mix n&#39; Match .NET Apps</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/post-command">Post Command - Inspect/Call HTTP APIs</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Background Concepts</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/what-is-a-message-based-web-service">What is a Message-based Web Service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/advantages-of-message-based-web-services">Advantages of message-based Services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/why-remote-services-use-dtos">Why Remote Services should use DTOs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/service-complexity-and-dto-roles">Complexity, Services and Role of DTOs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api-first-development">API First Development</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">UIs</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/api-explorer">API Explorer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/admin-ui">Admin UI</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/studio">Studio</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/studio-users">Studio - User Management</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/studio-autoquery">Studio - AutoQuery UI</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/studio-validation-rules">Studio - DB Validation Rules</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Reference</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/host-configuration">AppHost</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ioc">IOC</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/routing">Routing</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/order-of-operations">Order of Operations</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/customize-http-responses">Customize HTTP Responses</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/customize-json-responses">Customize JSON Responses</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/appsettings">Configuration &amp; AppSettings</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/metadata-page">Metadata Pages</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/svg">SVG Support</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/endpoints">REST, SOAP &amp; default endpoints</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/soap-support">SOAP support</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Error Handling</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/error-handling">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/validation">Validation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/world-validation">World Validation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/declarative-validation">Declarative Validation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/debugging">Debugging</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Server Events</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/server-events">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/csharp-server-events-client">C# Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript-server-events-client">TypeScript Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/java-server-events-client">Java Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-server-events-client">JavaScript Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/server-events-grpc">gRPC Clients</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/redis-server-events">Redis Server Events</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Service Gateway</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/service-gateway">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/service-discovery">Service Discovery</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Clients</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/clients-overview">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/csharp-client">C#/.NET Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript-add-servicestack-reference#typescript-serviceclient">TypeScript Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/javascript-client">JavaScript Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/java-add-servicestack-reference#jsonserviceclient-api">Java Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swift-add-servicestack-reference#swift-client-usage">Swift Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/dart-add-servicestack-reference#example-usage">Dart Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/silverlight-client">Silverlight Client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/messaging#mq-client-architecture">MQ Clients</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#mix-in-mq-server">Mix in MQ Server</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#worker-service-templates">Worker Service Templates</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#feature-mq">feature-mq</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#benefits-of-message-queues">Benefits of Message Queues</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mq-client-architecture">MQ Client Architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mq-server-architecture">MQ Server Architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#message-workflow">Message Workflow</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-no-responses-are-sent-to-outq-topic">Messages with no responses are sent to &#39;.outq&#39; Topic</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-responses-are-published-to-the-response-inq">Messages with Responses are published to the Response .inq</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#responses-from-messages-with-replyto-are-published-to-that-address">Responses from Messages with ReplyTo are published to that address</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-exceptions-are-re-tried-then-published-to-the-dead-letter-queue-dlq">Messages with exceptions are re-tried then published to the dead-letter-queue (.dlq)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#priority-queues">Priority Queues</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#oneway-http-requests-are-published-to-mq-then-executed">OneWay HTTP Requests are published to MQ then executed</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#oneway-mq-and-http-service-clients-are-substitutable">OneWay MQ and HTTP Service Clients are Substitutable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#disable-outq-notification-messages">Disable &#39;outq&#39; notification messages</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#flexible-queue-name-strategies">Flexible Queue Name strategies</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#authenticated-requests-via-mq">Authenticated Requests via MQ</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#embedding-auth-info-in-mq-request-dto">Embedding Auth Info in MQ Request DTO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding-mq-request-headers">Overriding MQ Request Headers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#global-filters-vs-action-filters">Global Filters vs Action Filters</a><!----></li></ul></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Add ServiceStack Reference</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/add-servicestack-reference">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/csharp-add-servicestack-reference">C# Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/typescript-add-servicestack-reference">TypeScript Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/python-add-servicestack-reference">Python Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swift-add-servicestack-reference">Swift Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/java-add-servicestack-reference">Java Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/kotlin-add-servicestack-reference">Kotlin Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/dart-add-servicestack-reference">Dart Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/fsharp-add-servicestack-reference">F# Add Reference</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vbnet-add-servicestack-reference">VB.NET Add Reference</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">MQ Messaging</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/messaging">Overview</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#mix-in-mq-server">Mix in MQ Server</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#worker-service-templates">Worker Service Templates</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#feature-mq">feature-mq</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#benefits-of-message-queues">Benefits of Message Queues</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mq-client-architecture">MQ Client Architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mq-server-architecture">MQ Server Architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#message-workflow">Message Workflow</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-no-responses-are-sent-to-outq-topic">Messages with no responses are sent to &#39;.outq&#39; Topic</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-responses-are-published-to-the-response-inq">Messages with Responses are published to the Response .inq</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#responses-from-messages-with-replyto-are-published-to-that-address">Responses from Messages with ReplyTo are published to that address</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#messages-with-exceptions-are-re-tried-then-published-to-the-dead-letter-queue-dlq">Messages with exceptions are re-tried then published to the dead-letter-queue (.dlq)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#priority-queues">Priority Queues</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#oneway-http-requests-are-published-to-mq-then-executed">OneWay HTTP Requests are published to MQ then executed</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#oneway-mq-and-http-service-clients-are-substitutable">OneWay MQ and HTTP Service Clients are Substitutable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#disable-outq-notification-messages">Disable &#39;outq&#39; notification messages</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#flexible-queue-name-strategies">Flexible Queue Name strategies</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#authenticated-requests-via-mq">Authenticated Requests via MQ</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#embedding-auth-info-in-mq-request-dto">Embedding Auth Info in MQ Request DTO</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overriding-mq-request-headers">Overriding MQ Request Headers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#global-filters-vs-action-filters">Global Filters vs Action Filters</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/background-mq">Background MQ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/rabbit-mq">Rabbit MQ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/redis-mq">Redis MQ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/amazon-sqs-mq">Amazon SQS MQ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/azure-service-bus-mq">Azure Service Bus MQ</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Jupyter Notebooks</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/jupyter-notebooks">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jupyter-notebooks-python">Python Jupyter Notebooks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jupyter-notebooks-csharp">C# Jupyter Notebooks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jupyter-notebooks-fsharp">F# Jupyter Notebooks</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jupyter-notebooks-reporting">Jupyter Reporting</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">GitHub Action Templates</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/github-action-templates">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/do-github-action-mix-deployment">GitHub GHR &amp; Digital Ocean</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/mix-github-actions-aws-ecs">AWS ECR &amp; ECS with NGINX</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Encrypted Messaging</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/encrypted-messaging">Overview</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Advanced</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/logging">Logging</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/request-and-response-filters">Request &amp; Response filters</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/filter-attributes">Filter attributes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/access-http-specific-features-in-services">Access HTTP features in services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/serialization-deserialization">Serialization &amp; Deserialization</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/auto-mapping">Auto-Mapping</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/auto-batched-requests">Auto Batched Requests</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/virtual-file-system">Virtual File System</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/multitenancy">Multitenancy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/physical-project-structure">Physical Project Structure</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/modularizing-services">Modularizing Services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/built-in-profiling">Built-in profiling</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/hot-reloading">Hot Reloading</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/html-css-and-javascript-minification">HTML, CSS and JS Minifiers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/mvc-integration">MVC Integration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/servicestack-integration">ServiceStack Integration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/servicestack-side-by-side-with-another-web-framework">Run side-by-side with another fx</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/versioning">Versioning</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config-api">Config API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/concurrency-model">Concurrency Model</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/form-hijacking-prevention">Form Hijacking Prevention</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/create-webservice-from-scratch">Create a WebService from scratch</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Formats</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/formats">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/json-format">JSON Format</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jsv-format">JSV Format</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/csv-format">CSV Format</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/messagepack-format">MessagePack Format</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/protobuf-format">ProtoBuf Format</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/html5reportformat">HTML5 Report Format</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">.NET Core</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore-redis">.NET Core Redis</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore-localhost-cert">Configure localhost dev cert</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/deploy-netcore-to-amazon-linux-2-ami">Deploy to Amazon Linux 2 AMI</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/deploy-netcore-docker-aws-ecs">Deploy .NET Core Apps to AWS ECS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore-deploy-rsync">Deploy .NET Core Apps using rsync</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Utils</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/http-utils">HTTP Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/dump-utils">Dump Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/reflection-utils">Reflection Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/js-utils">JS Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/adhoc-utils">Adhoc Utils</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/simple-ioc">Simple IOC</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Caching</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/caching">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/http-caching">HTTP Caching</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/cacheresponse-attribute">CacheResponse Attribute</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/cache-aware-clients">Cache Aware Clients</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/compression">Compression</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Plugins</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/plugins">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/openapi">Open API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/admin-users">User Admin Feature</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/corsfeature">CORS Feature</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/proxy-feature">Proxy Feature</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/request-logger">Request logger</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lisp-tcp-repl-server">Lisp TCP REPL Server</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/postman">Postman</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/sitemaps">Sitemaps</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/cancellable-requests">Cancellable Requests</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/webhooks">Webhooks</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">View Engines</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/netcore-razor">ServiceStack Razor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/razor-ui-controls">Razor UI Controls</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/razor-notes">Razor Notes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/view-and-template-selection">View and Template Selection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/compiled-razor-views">Compiled Razor Views</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/razor-views-vs-content-pages">Razor Views vs Content Pages</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">JavaScript Web Apps</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/vue-components">Vue Components</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/servicestack-client-umd">Embedded UMD @servicestack/client</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ss-utils-js">ss-utils.js JavaScript Client Library</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Hosts</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/iis">IIS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/self-hosting">Self-hosting</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Tests</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/testing">Testing</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/howto-write-unit-integration-tests">HowTo write unit &amp; integration tests</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Java</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/java">Java ServiceStack Resources</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/java-add-servicestack-reference#servicestack-idea-android-studio-plugin">Android Studio &amp; IntelliJ</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Other Languages</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/swift">Swift</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/fsharp">F#</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/vbnet">VB.NET</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Deployment</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/deploy-multiple-sites-to-aws">Deploy Multiple Sites to single AWS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/simple-deployments-to-aws">Simple Deployments with WebDeploy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/advanced-deployment-octopus-deploy">Deployments with OctopusDeploy</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Amazon Web Services</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/aws">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/aws-pocodynamo">PocoDynamo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/aws-getting-started">Getting Started with AWS</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Azure</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/azure">Overview</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Stripe</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/stripe">Overview</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Install 3rd Party Products</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/install-redis-windows">Redis on Windows</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/install-rabbitmq-windows">RabbitMQ on Windows</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ssl-redis-azure">Redis SSL on Azure</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Performance</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/real-world-performance">Real world performance</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Future</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/roadmap">Roadmap</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--[--><!----><!--]--><!--[--><h1>Messaging API</h1><!--]--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>ServiceStack provides a <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Messaging/" target="_blank" rel="noopener noreferrer">high-level Messaging API</a> exposing a number of essential messaging features in order to publish and receive messages as well as registering and processing handlers for different message types. A class diagram of the core interfaces is below:</p><p><img src="https://raw.github.com/mythz/rabbitmq-windows/master/img/messaging-api.png" alt="Messaging API"></p><p>There are currently 5 supported MQ Server options:</p><ul><li><a href="/background-mq">Background MQ Service</a></li><li><a href="/rabbit-mq">Rabbit MQ Server</a></li><li><a href="/redis-mq">Redis MQ Server</a></li><li><a href="/amazon-sqs-mq">Amazon SQS MQ Server</a></li><li><a href="/azure-service-bus-mq">Azure Service Bus MQ</a></li></ul><p>Like other ServiceStack providers, all MQ Servers are interchangeable, visible in the shared MQ Server tests below:</p><ul><li><a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.Server.Tests/Messaging/MqServerIntroTests.cs" target="_blank" rel="noopener noreferrer">MqServerIntroTests.cs</a></li><li><a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.Common.Tests/Messaging/MqServerAppHostTests.cs" target="_blank" rel="noopener noreferrer">MqServerAppHostTests.cs</a></li></ul><h2 id="mix-in-mq-server" tabindex="-1">Mix in MQ Server <a class="header-anchor" href="#mix-in-mq-server" aria-hidden="true">#</a></h2><p>In <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps we recommend using <a href="/mix-tool">mix</a> to configure your preferred MQ Service, other than being quicker to add, it proposes adopting a naming convention in app settings and file names that other <code>mix</code> features can also make use of:</p><div class="sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)"><div class="flex-grow bg-gray-800"><div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x mix [mq]</p></div></div><div class="flex"><div class="bg-green-600 text-white p-1.5 pb-0"><svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg class="nocopy w-6 h-6" title="copy" fill="none" stroke="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg></div></div></div><p>Currently available list of MQ Services:</p><div class="language-"><pre><code>Results matching tag [mq]:

   1. backgroundmq  Use Memory Background MQ                    to: $HOST  by @ServiceStack  [mq]
   2. rabbitmq      Use RabbitMQ                                to: $HOST  by @ServiceStack  [mq]
   3. sqs           Use AWS SQS MQ                              to: $HOST  by @ServiceStack  [mq]
   4. servicebus    Use Azure Service Bus MQ                    to: $HOST  by @ServiceStack  [mq]
   5. redismq       Use Redis MQ                                to: $HOST  by @ServiceStack  [mq]
   6. feature-mq    Simple MQ Feature to test sending Messages  to: $HOST  by @ServiceStack  [feature,mq,sharp]
</code></pre></div><h2 id="worker-service-templates" tabindex="-1">Worker Service Templates <a class="header-anchor" href="#worker-service-templates" aria-hidden="true">#</a></h2><p>If you&#39;d instead prefer to develop stand-alone MQ Servers (i.e. without HTTP access) then it can be beneficial to run the MQ Server in an <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Worker Service by starting from a pre-configured project template:</p><table><thead><tr><th></th><th>.NET Core C# Worker Service Templates</th></tr></thead><tbody><tr><td><a href="https://github.com/NetCoreTemplates/worker-rabbitmq" target="_blank" rel="noopener noreferrer">worker-rabbitmq</a></td><td>.NET 6.0 Rabbit MQ Worker Service</td></tr><tr><td><a href="https://github.com/NetCoreTemplates/worker-redismq" target="_blank" rel="noopener noreferrer">worker-redismq</a></td><td>.NET 6.0 Redis MQ Worker Service</td></tr><tr><td><a href="https://github.com/NetCoreTemplates/worker-servicebus" target="_blank" rel="noopener noreferrer">worker-servicebus</a></td><td>.NET 6.0 Azure Service Bus MQ Worker Service</td></tr><tr><td><a href="https://github.com/NetCoreTemplates/worker-sqs" target="_blank" rel="noopener noreferrer">worker-sqs</a></td><td>.NET 6.0 AWS SQS MQ Worker Service</td></tr></tbody></table><h3 id="feature-mq" tabindex="-1">feature-mq <a class="header-anchor" href="#feature-mq" aria-hidden="true">#</a></h3><p>The <code>feature-mq</code> adds MQ support to your App, complete with UI and includes 2 different ways of calling MQ Services in ServiceStack, just like <a href="/mix-tool#mix-in-prebuilt-recipes-and-working-examples">example-validation UI</a>, <code>feature-mq</code> is another complete working example with both UI and Service implementation in the following files:</p><ul><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-configure-mq-cs" target="_blank" rel="noopener noreferrer">Configure.Mq.cs?</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-feature-mq-cs" target="_blank" rel="noopener noreferrer">Feature.Mq.cs</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-serviceinterface-mqservices-cs" target="_blank" rel="noopener noreferrer">ServiceInterface\MqServices.cs </a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-servicemodel-mq-cs" target="_blank" rel="noopener noreferrer">ServiceModel\Mq.cs</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-wwwroot-messaging-html" target="_blank" rel="noopener noreferrer">wwwroot\messaging.html</a></li></ul><p>As <code>Configure.Mq.cs?</code> is optional it will only add it if doesn&#39;t already exist, so it will either use your existing MQ configuration or configure your App to use the In Memory <code>BackgroundMqService</code> implementation.</p><p>Add <code>feature-mq</code> to your project with:</p><div class="sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)"><div class="flex-grow bg-gray-800"><div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x mix feature-mq</p></div></div><div class="flex"><div class="bg-green-600 text-white p-1.5 pb-0"><svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg class="nocopy w-6 h-6" title="copy" fill="none" stroke="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg></div></div></div><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/feature-mq.png" alt=""></p><p>This will add the <code>TestMq</code> Service and make it available to your MQ endpoint. <code>TestMq</code> is a regular service that updates values in the App&#39;s registered <code>ICacheClient</code> and returns the Cache&#39;s current values as well as the internal Stats of the MQ:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IMessageService</span> MqService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">PublishMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TestMq<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">TestMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span>Add<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Decrement</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestMqResponse</span> <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Counter <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            StatsDescription <span class="token operator">=</span> MqService<span class="token punctuation">.</span><span class="token function">GetStatsDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The 2 ways to call a MQ Service is directly using the <code>publish</code> or <code>sendOneWay</code> APIs (available in all ServiceStack Service Clients) where it send the request to the Service&#39;s <code>/oneway</code> endpoint which will automatically publish it to the registered MQ.</p><p>Alternatively you can publish the Request DTO yourself from a different Service Implementation as done in <code>PublishMq</code>, as-is typical for Services that queues sending emails without blocking Service Execution.</p><p>The feature&#39;s UI allows you to publish <code>TestMq</code> messages using either approach:</p><div class="language-js"><pre><code>client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> oneway <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input[name=mq-publish]:checked&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">&quot;OneWay&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>oneway<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TestMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PublishMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Both approaches end with the same result with the <code>TestMq</code> Request DTO published and executed by the registered MQ Service as shown in the UI which is periodically updated with the current state in the Cache and the internal stats of the MQ Service showing how many messages it processed.</p><h2 id="benefits-of-message-queues" tabindex="-1">Benefits of Message Queues <a class="header-anchor" href="#benefits-of-message-queues" aria-hidden="true">#</a></h2><p>One of the benefits of using ServiceStack is its integrated support for hosting MQ Servers allowing your Services to be invoked via a MQ Broker. There are a number of reasons why you&#39;d want to use a MQ as an alternative to HTTP including:</p><ul><li>Sender is decoupled from Receiver, eliminating point-to-point coupling and configuration</li><li>Allows no-touch deploy of new clients and servers without updating any configuration</li><li>Removes time-coupling allowing clients and servers to be deployed independently without downtime</li><li>Better reliability, consumers can still send messages when servers are down and vice-versa</li><li>Durable, messages can be persisted and survive application or server reboots</li><li>Allows for CPU Intensive or long operations without disrupting message workflow</li><li>Instant response times by queuing slow operations and executing them in the background</li><li>Allows for natural load-balancing where throughput can be increased by simply adding more processors or servers</li><li>Message-based design allows for easier parallelization and introspection of computations</li><li>Greater throttling and control of message throughput, message execution can be determined by server</li><li>Reduces request contention and can defer execution of high load spikes over time</li><li>Better recovery, messages generating server exceptions can be retried and maintained in a dead-letter-queue</li><li>DLQ messages can be introspected, fixed and later replayed after server updates and rejoin normal message workflow</li></ul><p>More details of these and other advantages can be found in the definitive <a href="http://www.eaipatterns.com" target="_blank" rel="noopener noreferrer">Enterprise Integration Patterns</a>.</p><p>Likewise the HTTP Service Clients implement the Messaging API <code>IMessageProducer</code>:</p><div class="language-csharp"><pre><code><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">Publish</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">T</span> requestDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">Publish</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IMessage<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When publishing a <code>IMessage&lt;T&gt;</code> the message metadata are sent as HTTP Headers with an <code>X-</code> prefix.</p><h2 id="mq-client-architecture" tabindex="-1">MQ Client Architecture <a class="header-anchor" href="#mq-client-architecture" aria-hidden="true">#</a></h2><p>By promoting clean (endpoint-ignorant and dependency-free) Service and DTO classes, your web services are instantly re-usable from non-http contexts like MQ Services.</p><p>Within MQ Services, Request DTO&#39;s get wrapped and sent within the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Messaging/IMessage.cs" target="_blank" rel="noopener noreferrer">IMessage</a> body, which looks like:</p><p><img src="/assets/servicestack-mqclients.59314063.png" alt="ServiceStack MQ Client Architecture"></p><h2 id="mq-server-architecture" tabindex="-1">MQ Server Architecture <a class="header-anchor" href="#mq-server-architecture" aria-hidden="true">#</a></h2><p>The Server Architecture shows where MQ Hosts (in green) fits within the context of ServiceStack&#39;s Request Pipeline. Effectively MQ Services are treated as &quot;internal Services&quot; bypassing HTTP Web Services Content Negotiation and Global Request/Response Filters:</p><p><img src="/assets/servicestack-logical-view-02.89aff756.png" alt="ServiceStack Logical Architecture View"></p><p>MQ Services also have their own distinct <code>GlobalMessageRequestFilters</code> and <code>GlobalMessageResponseFilters</code> for registering custom logic that only applies to MQ Requests. Plugins like <a href="/validation#validation-feature">Validation Feature</a> can execute custom behavior for both HTTP and MQ Services by registering it in <a href="https://github.com/ServiceStack/ServiceStack/blob/fc191835d97e5b6d89d3cd7a4742793af44eb8c3/src/ServiceStack/Validation/ValidationFeature.cs#L25-L29" target="_blank" rel="noopener noreferrer">both HTTP GlobalRequestFilters and MQ GlobalMessageRequestFilters</a>, e.g:</p><div class="language-csharp"><pre><code>appHost<span class="token punctuation">.</span>GlobalRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidationFilters<span class="token punctuation">.</span>RequestFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
appHost<span class="token punctuation">.</span>GlobalMessageRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidationFilters<span class="token punctuation">.</span>RequestFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="message-workflow" tabindex="-1">Message Workflow <a class="header-anchor" href="#message-workflow" aria-hidden="true">#</a></h2><p>By default, MQ Servers will send a response message after it&#39;s processed each message, what the response is and which Queue (or HTTP url) the response is published to is dependent on the outcome of the message handler, i.e:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/wikis/message-flow.png" alt="MQ Flowchart"></p><h3 id="messages-with-no-responses-are-sent-to-outq-topic" tabindex="-1">Messages with no responses are sent to &#39;.outq&#39; Topic <a class="header-anchor" href="#messages-with-no-responses-are-sent-to-outq-topic" aria-hidden="true">#</a></h3><p>When a handler returns a <code>null</code> response, the incoming message is re-published as a &quot;transient&quot; message to the out queue, e.g: <code>mq:Hello.outq</code> having the effect of notifying any subscribers to <code>mq:Hello.outq</code> each time a message is processed.</p><p>We can use this behavior to block until a message gets processed with:</p><div class="language-csharp"><pre><code><span class="token class-name">IMessage<span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span> msgCopy <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>Hello<span class="token operator">&gt;</span><span class="token punctuation">.</span>Out<span class="token punctuation">)</span><span class="token punctuation">;</span>
mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>msgCopy<span class="token punctuation">)</span><span class="token punctuation">;</span>
msgCopy<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name <span class="token comment">//= World</span>
</code></pre></div><p>Also shown in this example is an explicit <strong>Ack</strong> (which should be done for each message you receive) to tell the MQ Broker that you&#39;ve taken responsibility of the message so it can safely remove it off the queue.</p><h3 id="messages-with-responses-are-published-to-the-response-inq" tabindex="-1">Messages with Responses are published to the Response .inq <a class="header-anchor" href="#messages-with-responses-are-published-to-the-response-inq" aria-hidden="true">#</a></h3><p>Often message handlers will just return a POCO response after it processes a message, e.g:</p><div class="language-csharp"><pre><code>mqServer<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterHandler</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Whenever there&#39;s a response, then instead of the .outq the response message is sent to the <strong>.inq</strong> of the response message type, which for a <code>HelloResponse</code> type is just <strong>mq:HelloResponse.inq</strong>, e.g:</p><div class="language-csharp"><pre><code>mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> responseMsg <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HelloResponse<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>HelloResponse<span class="token operator">&gt;</span><span class="token punctuation">.</span>In<span class="token punctuation">)</span><span class="token punctuation">;</span>
mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>responseMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
responseMsg<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result <span class="token comment">//= Hello, World!</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>this behavior can be limited to only publish responses for types in the <code>mqServer.PublishResponsesWhitelist</code>, otherwise all response messages can be disabled entirely by setting <code>mqServer.DisablePublishingResponses = true</code>.</p></div><h3 id="responses-from-messages-with-replyto-are-published-to-that-address" tabindex="-1">Responses from Messages with ReplyTo are published to that address <a class="header-anchor" href="#responses-from-messages-with-replyto-are-published-to-that-address" aria-hidden="true">#</a></h3><p>Whilst for the most part you&#39;ll only need to publish POCO messages, you can also alter the default behavior by providing a customized <code>IMessage&lt;T&gt;</code> wrapper which ServiceStack will send instead, e.g. you can specify your own <strong>ReplyTo</strong> address to change the queue where the response gets published, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> replyToMq <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token function">GetTempQueueName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Message<span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ReplyTo <span class="token operator">=</span> replyToMq
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">IMessage<span class="token punctuation">&lt;</span>HelloResponse<span class="token punctuation">&gt;</span></span> responseMsg <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HelloResponse<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>replyToMq<span class="token punctuation">)</span><span class="token punctuation">;</span>
mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>responseMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
responseMsg<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result <span class="token comment">//= Hello, World!</span>
</code></pre></div><h4 id="replyto-addresses-can-be-urls" tabindex="-1">ReplyTo addresses can be URLs <a class="header-anchor" href="#replyto-addresses-can-be-urls" aria-hidden="true">#</a></h4><p>A nice feature unique in ServiceStack is that the ReplyTo address can even be a <strong>HTTP Uri</strong>, in which case ServiceStack will attempt to <strong>POST</strong> the raw response at that address. This works nicely with ServiceStack Services which excel at accepting serialized DTO&#39;s.</p><div class="language-csharp"><pre><code>mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Message<span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ReplyTo <span class="token operator">=</span> <span class="token string">&quot;http://example.org/hello/callback&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="messages-with-exceptions-are-re-tried-then-published-to-the-dead-letter-queue-dlq" tabindex="-1">Messages with exceptions are re-tried then published to the dead-letter-queue (.dlq) <a class="header-anchor" href="#messages-with-exceptions-are-re-tried-then-published-to-the-dead-letter-queue-dlq" aria-hidden="true">#</a></h3><p>By default Mq Servers lets you specify whether or not you want messages that cause an exception to be retried by specifying a RetryCount of 1 (default), or if you don&#39;t want any messages re-tried, specify a value of 0, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> mqServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RabbitMqServer</span> <span class="token punctuation">{</span> RetryCount <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>To illustrate how this works we&#39;ll keep a counter of how many times a message handler is invoked, then throw an exception to force an error condition, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> called <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
mqServer<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterHandler</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    called<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now when we publish a message the response instead gets published to the messages <strong>.dlq</strong>, after it&#39;s first transparently retried. We can verify this behavior by checking <code>called=2</code>:</p><div class="language-csharp"><pre><code>mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">IMessage<span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span> dlqMsg <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>Hello<span class="token operator">&gt;</span><span class="token punctuation">.</span>Dlq<span class="token punctuation">)</span><span class="token punctuation">;</span>
mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>dlqMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

Assert<span class="token punctuation">.</span><span class="token function">That</span><span class="token punctuation">(</span>called<span class="token punctuation">,</span> Is<span class="token punctuation">.</span><span class="token function">EqualTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>DLQ Messages retains the original message in their body as well as the last exception serialized in the <code>IMessage.Error</code> ResponseStatus metadata property, e.g:</p><div class="language-csharp"><pre><code>dlqMsg<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name   <span class="token comment">//= World</span>
dlqMsg<span class="token punctuation">.</span>Error<span class="token punctuation">.</span>ErrorCode  <span class="token comment">//= typeof(ArgumentException).Name</span>
dlqMsg<span class="token punctuation">.</span>Error<span class="token punctuation">.</span>Message    <span class="token comment">//= Name</span>
</code></pre></div><p>Since the body of the original message is left in-tact, you&#39;re able to retry failed messages by removing them from the dead-letter-queue then re-publishing the original message, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name">IMessage<span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span> dlqMsg <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Hello<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>Hello<span class="token operator">&gt;</span><span class="token punctuation">.</span>Dlq<span class="token punctuation">)</span><span class="token punctuation">;</span>

mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span>dlqMsg<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>dlqMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is useful for recovering failed messages after identifying and fixing bugs that were previously causing exceptions, where you can replay and re-process DLQ messages and continue processing them as normal.</p><h3 id="priority-queues" tabindex="-1">Priority Queues <a class="header-anchor" href="#priority-queues" aria-hidden="true">#</a></h3><p>MQ Servers spawns 2 threads for each handler, one to listen to the Message Inbox <code>mq:&lt;Message&gt;.inq</code> and another to listen on the Priority Queue located at <code>mq:&lt;Message&gt;.priorityq</code>.</p><p>You can white-list which messages to enable Priority Queue&#39;s for with <code>mqServer.PriorityQueuesWhitelist</code> or disable them all by setting:</p><div class="language-cs"><pre><code>mqServer<span class="token punctuation">.</span>DisablePriorityQueues <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="oneway-http-requests-are-published-to-mq-then-executed" tabindex="-1">OneWay HTTP Requests are published to MQ then executed <a class="header-anchor" href="#oneway-http-requests-are-published-to-mq-then-executed" aria-hidden="true">#</a></h3><p>Using the <code>SendOneWay()</code> Service Client APIs will publish DTO&#39;s to the <code>/oneway</code> <a href="/routing#pre-defined-routes">Pre-defined Route</a>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">SendOneWay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestDto</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//POST&#39;s to /json/oneway/RequestDto</span>
</code></pre></div><p>Where if there is an MQ Server is registered in the AppHost it will instead publish the Request DTO to the registered MQ Server who then pulls it from the MQ Broker and executes the message in a background thread like a normal MQ Message. If no MQ Server is registered then the Request is executed in the HTTP Handler like a normal HTTP Request.</p><h3 id="oneway-mq-and-http-service-clients-are-substitutable" tabindex="-1">OneWay MQ and HTTP Service Clients are Substitutable <a class="header-anchor" href="#oneway-mq-and-http-service-clients-are-substitutable" aria-hidden="true">#</a></h3><p>Service Clients and MQ Clients are also interoperable where all MQ Clients implement the Service Clients <code>IOneWayClient</code> API which enables writing code that works with both HTTP and MQ Clients:</p><div class="language-csharp"><pre><code><span class="token class-name">IOneWayClient</span> client <span class="token operator">=</span> <span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">SendOneWay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestDto</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="disable-outq-notification-messages" tabindex="-1">Disable &#39;outq&#39; notification messages <a class="header-anchor" href="#disable-outq-notification-messages" aria-hidden="true">#</a></h3><p>All MQ Servers support the ability to specify a whitelist of Requests you <strong>only</strong> want to publish <code>.outq</code> for:</p><div class="language-csharp"><pre><code>PublishToOutqWhitelist <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>MyRequest<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre></div><p>Alternatively all <code>.outq</code> messages can be disabled with:</p><div class="language-csharp"><pre><code>DisablePublishingToOutq <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="flexible-queue-name-strategies" tabindex="-1">Flexible Queue Name strategies <a class="header-anchor" href="#flexible-queue-name-strategies" aria-hidden="true">#</a></h3><p>There are more flexible options for specifying the Queue Names where you can categorize queue names or avoid conflicts with other MQ services by specifying a global prefix to be used for all Queue Names, e.g:</p><div class="language-csharp"><pre><code>QueueNames<span class="token punctuation">.</span><span class="token function">SetQueuePrefix</span><span class="token punctuation">(</span><span class="token string">&quot;site1.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QueueNames<span class="token operator">&lt;</span>Hello<span class="token operator">&gt;</span><span class="token punctuation">.</span>In <span class="token comment">//= site1.mq:Hello.inq</span>
</code></pre></div><p>Or to gain complete control of each queue name used, provide a custom QueueName strategy, e.g:</p><div class="language-csharp"><pre><code>QueueNames<span class="token punctuation">.</span>ResolveQueueNameFn <span class="token operator">=</span> <span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> suffix<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token interpolation-string"><span class="token string">$&quot;SITE.</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">typeName<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">suffix<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>

QueueNames<span class="token operator">&lt;</span>Hello<span class="token operator">&gt;</span><span class="token punctuation">.</span>In  <span class="token comment">//= SITE.hello.INQ</span>
</code></pre></div><blockquote><p>Note: Custom QueueNames need to be declared on both MQ Client in addition to ServiceStack Hosts.</p></blockquote><h2 id="authenticated-requests-via-mq" tabindex="-1">Authenticated Requests via MQ <a class="header-anchor" href="#authenticated-requests-via-mq" aria-hidden="true">#</a></h2><p>As MQ Requests aren&#39;t executed within the Context of a HTTP Request they don&#39;t have access to any HTTP Info like HTTP Cookies, Headers, FormData, etc. This also means the Users Session isn&#39;t typically available as it&#39;s based on the <a href="/sessions">ss-id Session Ids in Cookies</a>.</p><h3 id="embedding-auth-info-in-mq-request-dto" tabindex="-1">Embedding Auth Info in MQ Request DTO <a class="header-anchor" href="#embedding-auth-info-in-mq-request-dto" aria-hidden="true">#</a></h3><p>The easiest way to publish Authenticated MQ Requests is using the <a href="/encrypted-messaging#authentication-with-encrypted-messaging">same approach as Encrypted Messaging</a> by embedding the Auth Info in the Request DTO by implementing <code>IHasSessionId</code> if using session-based Authentication or <code>IHasBearerToken</code> if using token-based Auth, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthSessionMq</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasSessionId</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SessionId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthTokenMq</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasBearerToken</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> BearerToken <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">PublishSessionMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> mqRequest <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthSessionMq<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mqRequest<span class="token punctuation">.</span>SessionId <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">GetSessionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>mqRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">PublishTokenMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> mqRequest <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthTokenMq<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mqRequest<span class="token punctuation">.</span>BearerToken <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">GetSessionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>mqRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="overriding-mq-request-headers" tabindex="-1">Overriding MQ Request Headers <a class="header-anchor" href="#overriding-mq-request-headers" aria-hidden="true">#</a></h3><p>Alternatively as ServiceStack also lets you specify a Users Session ids using HTTP Headers (with <code>X-</code> prefix), we can instead specify Session Ids using Request Headers. To do this we can create a custom Request Context that the MQ Service is executed within and set the SessionId in the Headers:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicRequest</span> <span class="token punctuation">{</span> Verb <span class="token operator">=</span> HttpMethods<span class="token punctuation">.</span>Post <span class="token punctuation">}</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;X-ss-id&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> sessionId<span class="token punctuation">;</span>
</code></pre></div><p>Alternatively we can inject the Session itself. As a Users Session is just a <code>AuthUserSession</code> POCO persisted against the SessionId, we can access the Users Session from the CacheClient directly ourselves, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">//i.e. urn:iauthsession:{sessionId}</span>
<span class="token class-name"><span class="token keyword">var</span></span> sessionKey <span class="token operator">=</span> SessionFeature<span class="token punctuation">.</span><span class="token function">GetSessionKey</span><span class="token punctuation">(</span>sessionId<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name"><span class="token keyword">var</span></span> usersSession  <span class="token operator">=</span> HostContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICacheClient<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>sessionKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And inject to use this Session with:</p><div class="language-csharp"><pre><code>req<span class="token punctuation">.</span>Items<span class="token punctuation">[</span>Keywords<span class="token punctuation">.</span>Session<span class="token punctuation">]</span> <span class="token operator">=</span> usersSession<span class="token punctuation">;</span>
</code></pre></div><p>We can then Execute the MQ Service with this custom Request Context with:</p><div class="language-csharp"><pre><code><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ExecuteMessage</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>See the <a href="/sessions">Session docs</a> for more info about Sessions in ServiceStack</p></blockquote><p>We&#39;ll walk-through a minimal example using this approach to make authenticated Requests and access the Users Session in a Service that&#39;s accessible via both HTTP and MQ transports.</p><p>To start we&#39;ll configure an Authentication-enabled ServiceStack MQ and HTTP Self-Hosted Application:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppSelfHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//Enable Authentication</span>
        Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> 
                <span class="token comment">// Enable Username/Password Authentication</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CredentialsAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Use an InMemory Repository to persist User Authenticaiton Info</span>
        container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InMemoryAuthRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Create a new User on Startup</span>
        <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span> <span class="token punctuation">{</span>
            Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
            UserName <span class="token operator">=</span> <span class="token string">&quot;mythz&quot;</span><span class="token punctuation">,</span>
            FirstName <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
            LastName <span class="token operator">=</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span>
            DisplayName <span class="token operator">=</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55word&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Register to use a Rabbit MQ Server</span>
        container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RabbitMqServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> mqServer <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        mqServer<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterHandler</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthOnly<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicRequest</span> <span class="token punctuation">{</span> Verb <span class="token operator">=</span> HttpMethods<span class="token punctuation">.</span>Post <span class="token punctuation">}</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;X-ss-id&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SessionId<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token function">ExecuteMessage</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Start the Rabbit MQ Server listening for incoming MQ Requests</span>
        AfterInitCallbacks<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>appHost <span class="token operator">=&gt;</span> mqServer<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>and now add the Service Implementation:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthOnly</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>AuthOnlyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SessionId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthOnlyResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Result <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthOnlyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span> 
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span> <span class="token comment">//Only allow Authenticated Requests</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">AuthOnly</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Get the User Session for this Request</span>
        <span class="token class-name"><span class="token keyword">var</span></span> session <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SessionAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthOnlyResponse</span> <span class="token punctuation">{</span>
            Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">! Your UserName is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">session<span class="token punctuation">.</span>UserAuthName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>With the ServiceStack Host and Service implemented, we can start listening to both HTTP and Rabbit MQ Requests by starting the AppHost:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:1337/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then on the Client we can authenticate using UserName/Password credentials using the HTTP <a href="/csharp-client">Service Client</a>, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:1337/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Authenticate</span> <span class="token punctuation">{</span>
    UserName <span class="token operator">=</span> <span class="token string">&quot;mythz&quot;</span><span class="token punctuation">,</span>
    Password <span class="token operator">=</span> <span class="token string">&quot;p@55word&quot;</span><span class="token punctuation">,</span>
    RememberMe <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> sessionId <span class="token operator">=</span> response<span class="token punctuation">.</span>SessionId<span class="token punctuation">;</span>
</code></pre></div><p>The above Request establishes an authenticated Session with the <code>JsonServiceClient</code> instance which has its Cookies populated with the Users SessionIds - allowing it to make subsequent authenticated requests as that User.</p><p>To make Authenticated Requests via MQ we can pass the returned <code>sessionId</code> into the MQ Request:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> mqFactory <span class="token operator">=</span> <span class="token function">RabbitMqMessageFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> mqClient <span class="token operator">=</span> mqFactory<span class="token punctuation">.</span><span class="token function">CreateMessageQueueClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    mqClient<span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthOnly</span> <span class="token punctuation">{</span>                        
        Name <span class="token operator">=</span> <span class="token string">&quot;RabbitMQ Request&quot;</span><span class="token punctuation">,</span>
        SessionId <span class="token operator">=</span> sessionId<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Block until the Response is Received:</span>
    <span class="token class-name"><span class="token keyword">var</span></span> responseMsg <span class="token operator">=</span> mqClient<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthOnlyResponse<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>AuthOnlyResponse<span class="token operator">&gt;</span><span class="token punctuation">.</span>In<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mqClient<span class="token punctuation">.</span><span class="token function">Ack</span><span class="token punctuation">(</span>responseMsg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Acknowledge the message was received</span>
    
    <span class="token comment">//&quot;Hello, RabbitMQ Request! Your UserName is mythz&quot;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>responseMsg<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>This works since we&#39;re extracting the SessionId and injecting into a Custom Request Context used by the MQ Service:</p><div class="language-csharp"><pre><code>mqServer<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterHandler</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthOnly<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicRequest</span> <span class="token punctuation">{</span> Verb <span class="token operator">=</span> HttpMethods<span class="token punctuation">.</span>Post <span class="token punctuation">}</span><span class="token punctuation">;</span>
    req<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;X-ss-id&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">GetBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SessionId<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token function">ExecuteMessage</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="global-filters-vs-action-filters" tabindex="-1">Global Filters vs Action Filters <a class="header-anchor" href="#global-filters-vs-action-filters" aria-hidden="true">#</a></h3><p>One important difference worth re-iterating is that Filter Attribute declared on the Service class are top-level filters executed during Global Request filters which are only executed for HTTP Requests:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span> <span class="token comment">//Top-level Filter Attribute - only executed for HTTP Requests</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqAuthOnlyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">AuthOnly</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> session <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SessionAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthOnlyResponse</span> <span class="token punctuation">{</span>
            Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">! Your UserName is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">session<span class="token punctuation">.</span>UserAuthName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This will allow you to separate behavior for external HTTP Requests from internal MQ Requests.</p><p>To validate both HTTP and MQ Requests, place the <code>[Authenticate]</code> attribute on the method itself, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthOnlyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span> 
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span> <span class="token comment">//Authenticate both HTTP and MQ Requests</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">AuthOnly</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> session <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SessionAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthOnlyResponse</span> <span class="token punctuation">{</span>
            Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">! Your UserName is </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">session<span class="token punctuation">.</span>UserAuthName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/ServiceStack/docs/edit/master/docs/messaging.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/vbnet-add-servicestack-reference" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>VB.NET Add Reference</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/background-mq" data-v-38ede35f><span class="text" data-v-38ede35f>Background MQ</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"access-http-specific-features-in-services.md\":\"9eda6a6f\",\"add-servicestack-reference.md\":\"58c9893b\",\"adhoc-utils.md\":\"7baf39b5\",\"admin-ui.md\":\"4f8845cf\",\"admin-users.md\":\"93dfcb76\",\"advanced-deployment-octopus-deploy.md\":\"d77a796f\",\"advantages-of-message-based-web-services.md\":\"74874f09\",\"amazon-sqs-mq.md\":\"dd8b15bf\",\"api-design.md\":\"7bc10b7a\",\"api-explorer.md\":\"39d5e554\",\"api-first-development.md\":\"86f05ced\",\"api-key-authprovider.md\":\"1938cd03\",\"appsettings.md\":\"0613eab1\",\"architecture-overview.md\":\"faa57d23\",\"artists.md\":\"494b71db\",\"auth-anti-forgery.md\":\"f65eeca2\",\"auth-openid.md\":\"05083969\",\"auth-repository.md\":\"94f9c18d\",\"auth-restricting-services.md\":\"693957b6\",\"auth-signin-with-apple.md\":\"d6c957c9\",\"auth.md\":\"a9df947e\",\"authentication-and-authorization.md\":\"5631439d\",\"authentication-identity-aspnet.md\":\"fdaff624\",\"authentication-identity-servicestack.md\":\"66cef0a4\",\"authentication-identityserver.md\":\"0b1c750a\",\"auto-batched-requests.md\":\"b3609ed2\",\"auto-mapping.md\":\"9fa6adc7\",\"autoquery-audit-log.md\":\"a570aab8\",\"autoquery-autogen.md\":\"ed5ded3d\",\"autoquery-crud-bookings.md\":\"8d7352dc\",\"autoquery-crud.md\":\"f20e9ed7\",\"autoquery-data.md\":\"9018b11e\",\"autoquery-dynamodb.md\":\"ebf2dc89\",\"autoquery-memory.md\":\"7349552e\",\"autoquery-rdbms.md\":\"65210f6d\",\"autoquery-service.md\":\"d71b8d52\",\"autoquery.md\":\"870cbf6f\",\"aws-getting-started.md\":\"665fc44b\",\"aws-pocodynamo.md\":\"ad89268f\",\"aws.md\":\"6b832dae\",\"azure-service-bus-mq.md\":\"49d2182a\",\"azure.md\":\"226dfd74\",\"background-mq.md\":\"6cab7141\",\"benchmarks.md\":\"d1bfc18d\",\"built-in-profiling.md\":\"4cf87b2f\",\"bundling-and-minification.md\":\"cc3eee34\",\"cache-aware-clients.md\":\"83a8e5f6\",\"cacheresponse-attribute.md\":\"414f011d\",\"caching.md\":\"02e4e6b8\",\"cancellable-requests.md\":\"1103c85a\",\"clients-overview.md\":\"bad18acb\",\"code-contribution-guide.md\":\"8a44d8e0\",\"community-resources.md\":\"9d36599d\",\"compiled-razor-views.md\":\"32a8f8ea\",\"compression.md\":\"e6dd5542\",\"concurrency-model.md\":\"760fd820\",\"config-api.md\":\"d532d781\",\"contributing.md\":\"3a19e556\",\"contributors.md\":\"92a4bb5e\",\"corsfeature.md\":\"ef9d1bd1\",\"create-webservice-from-scratch.md\":\"d2924607\",\"create-your-first-webservice.md\":\"d434b280\",\"csharp-add-servicestack-reference.md\":\"b42fd92e\",\"csharp-client.md\":\"32ff3686\",\"csharp-server-events-client.md\":\"fb655f3c\",\"csv-format.md\":\"75571faf\",\"customize-http-responses.md\":\"ee2f33a8\",\"customize-json-responses.md\":\"31c417ee\",\"dart-add-servicestack-reference.md\":\"e50d49d4\",\"dart-client.md\":\"a1b0506a\",\"debugging.md\":\"9d98cf89\",\"declarative-validation.md\":\"2c4afbb1\",\"deploy-multiple-sites-to-aws.md\":\"ea82d383\",\"deploy-netcore-docker-aws-ecs.md\":\"11323888\",\"deploy-netcore-to-amazon-linux-2-ami.md\":\"3e3e5f3d\",\"design-message-based-apis.md\":\"82b148a7\",\"design-rest-services.md\":\"e5fab005\",\"do-github-action-mix-deployment.md\":\"95d7734a\",\"dotnet-new.md\":\"823d4767\",\"dotnet-tool.md\":\"8fe1fab1\",\"dump-utils.md\":\"7467ece1\",\"encrypted-messaging.md\":\"24e20f2f\",\"endpoints.md\":\"8b7a6e57\",\"error-handling.md\":\"07b7e45b\",\"explore-servicestack.md\":\"2ec5f330\",\"filter-attributes.md\":\"dc5349cd\",\"form-hijacking-prevention.md\":\"0ea762e3\",\"formats.md\":\"491f9d7f\",\"fsharp-add-servicestack-reference.md\":\"47af87b8\",\"fsharp.md\":\"127710ff\",\"github-action-templates.md\":\"5f7b3253\",\"grpc-android.md\":\"0f79f18b\",\"grpc-csharp.md\":\"793a4c50\",\"grpc-dart.md\":\"d068bbd8\",\"grpc-flutter.md\":\"30afbbdd\",\"grpc-generic.md\":\"74388fef\",\"grpc-go.md\":\"6a8c3ed4\",\"grpc-java.md\":\"8acbe495\",\"grpc-nodejs.md\":\"6697fcae\",\"grpc-php.md\":\"3c4e062b\",\"grpc-python.md\":\"a87c3b92\",\"grpc-ruby.md\":\"10e0c55a\",\"grpc-ssl.md\":\"0f2b26be\",\"grpc-swift.md\":\"7cc7185b\",\"grpc.md\":\"c9f6b444\",\"host-configuration.md\":\"c0e445f8\",\"hot-reloading.md\":\"f2d1d2f8\",\"how-to-contribute.md\":\"66bf8fc6\",\"howto-write-unit-integration-tests.md\":\"6def9444\",\"html-css-and-javascript-minification.md\":\"7e8a009e\",\"html5reportformat.md\":\"c7383196\",\"http-caching.md\":\"ba708254\",\"http-utils.md\":\"883985df\",\"iis.md\":\"4c1ef093\",\"index.md\":\"d05fb15c\",\"install-rabbitmq-windows.md\":\"b4bb9445\",\"install-redis-windows.md\":\"eb6a3998\",\"ioc.md\":\"989f3ce9\",\"jamstack-with-vitepress-servicestack.md\":\"bb129ff2\",\"jamstacks-net.md\":\"6741b397\",\"java-add-servicestack-reference.md\":\"c30fcb01\",\"java-server-events-client.md\":\"09a79ef7\",\"java.md\":\"aa51dab5\",\"javascript-add-servicestack-reference.md\":\"3d571164\",\"javascript-client.md\":\"ff2b2076\",\"javascript-server-events-client.md\":\"c4a2138a\",\"js-utils.md\":\"8c96e857\",\"json-format.md\":\"bac3fe57\",\"json-jsv-and-xml.md\":\"5276623f\",\"jsv-format.md\":\"d9aa62ad\",\"jupyter-notebooks-csharp.md\":\"4d293323\",\"jupyter-notebooks-fsharp.md\":\"e8ec8258\",\"jupyter-notebooks-python.md\":\"5c1e8af9\",\"jupyter-notebooks-reporting.md\":\"eb48f07e\",\"jupyter-notebooks.md\":\"9aac815f\",\"jwt-authprovider.md\":\"c2afe019\",\"kotlin-add-servicestack-reference.md\":\"7d957b44\",\"learning-servicestack.md\":\"f3d772fc\",\"linux-hosting-options.md\":\"f06e073f\",\"lisp-tcp-repl-server.md\":\"d25e1d5a\",\"logging.md\":\"6be25027\",\"markdown-razor.md\":\"7f0b38b4\",\"messagepack-format.md\":\"52256b13\",\"messaging.md\":\"5a61125f\",\"metadata-page.md\":\"95963060\",\"mix-github-actions-aws-ecs.md\":\"30723b9d\",\"mix-tool.md\":\"a49ff452\",\"modular-startup-legacy.md\":\"22c791c9\",\"modular-startup.md\":\"e008b0c4\",\"modularizing-services.md\":\"0b1c416b\",\"mono-repo.md\":\"5b5115d4\",\"mono.md\":\"9f9d29ee\",\"multitenancy.md\":\"42af9534\",\"mvc-integration.md\":\"865528c3\",\"myget.md\":\"97a2914d\",\"navigation.md\":\"ff35ad95\",\"netcore-deploy-rsync.md\":\"6ba8a973\",\"netcore-localhost-cert.md\":\"07ab1f24\",\"netcore-razor.md\":\"893b7d0b\",\"netcore-redis.md\":\"ba8870d4\",\"netcore-windows-desktop.md\":\"50592f78\",\"netcore.md\":\"feccd269\",\"nhibernate.md\":\"03b72694\",\"npm-new.md\":\"80763e4a\",\"nuget.md\":\"af6fd669\",\"openapi.md\":\"878a790f\",\"order-of-operations.md\":\"1945694e\",\"ormlite.md\":\"67efccb1\",\"ormlite_apis_delete.md\":\"d707d4df\",\"ormlite_apis_insert.md\":\"e6cb0f0f\",\"ormlite_apis_schema.md\":\"1f3209f5\",\"ormlite_apis_select.md\":\"2a7c9285\",\"ormlite_apis_update.md\":\"337d61fd\",\"ormlite_async-apis.md\":\"ebb4a066\",\"ormlite_autogen-t4.md\":\"c4ba0a2c\",\"ormlite_aws-rds-databases.md\":\"f77f007d\",\"ormlite_complex-type-serializers.md\":\"364eeeb5\",\"ormlite_custom-sql-features.md\":\"da020c33\",\"ormlite_custom-sql.md\":\"cd6277e8\",\"ormlite_customer-orders-example.md\":\"2310f46e\",\"ormlite_dictionary-apis.md\":\"6aa42463\",\"ormlite_dynamic-result-sets.md\":\"dd5f4f77\",\"ormlite_ensure-apis.md\":\"2bfdbe48\",\"ormlite_filters.md\":\"7c47f0b7\",\"ormlite_getting-started.md\":\"7c3d2e3b\",\"ormlite_index.md\":\"5030761d\",\"ormlite_installation.md\":\"5ab205cd\",\"ormlite_introspection.md\":\"425f3bdf\",\"ormlite_limitations.md\":\"4d499add\",\"ormlite_multi-database-connections.md\":\"3e179e2c\",\"ormlite_optimistic-concurrency.md\":\"78c251f4\",\"ormlite_ormlite-apis.md\":\"81ab0cf3\",\"ormlite_ormlite-utils.md\":\"d5cae7ab\",\"ormlite_postgres-features.md\":\"156627c1\",\"ormlite_reference-support.md\":\"921c6932\",\"ormlite_shippers-example.md\":\"738dd6a7\",\"ormlite_sql-server-features.md\":\"2f6b4a5a\",\"ormlite_stored-procedures.md\":\"365c7b2b\",\"ormlite_type-converters.md\":\"943b4532\",\"ormlite_typed-joins.md\":\"ecba8905\",\"ormlite_untyped-apis.md\":\"1c2cb57a\",\"oss.md\":\"0b8b1c6c\",\"physical-project-structure.md\":\"8ec2c203\",\"plugins.md\":\"10e9920b\",\"post-command.md\":\"522d81cd\",\"postman.md\":\"d93512cc\",\"prerequisites.md\":\"d8d48214\",\"protobuf-format.md\":\"41c13ac9\",\"proxy-feature.md\":\"bc997f88\",\"python-add-servicestack-reference.md\":\"ea27bda9\",\"rabbit-mq.md\":\"417d1f52\",\"razor-notes.md\":\"6d45e397\",\"razor-ui-controls.md\":\"f995cd31\",\"razor-views-vs-content-pages.md\":\"3f52846f\",\"real-world-performance.md\":\"5848f001\",\"redis-mq.md\":\"33d1bc92\",\"redis-server-events.md\":\"054a50d4\",\"redis.md\":\"3baa8cf8\",\"redis_async.md\":\"9d7d99d6\",\"redis_automatic-retries.md\":\"68a48e7b\",\"redis_client-managers.md\":\"1445c2ce\",\"redis_client-usage.md\":\"e3b28542\",\"redis_client.md\":\"67cddc59\",\"redis_custom-commands.md\":\"bbf7785f\",\"redis_design-nosql.md\":\"611e8650\",\"redis_index.md\":\"3b48593f\",\"redis_lua.md\":\"438fd56a\",\"redis_pubsub.md\":\"114106da\",\"redis_schemaless-migration.md\":\"d5ee1226\",\"redis_sentinel.md\":\"f46760d9\",\"redis_stats.md\":\"c6a0d47b\",\"redis_transactions.md\":\"489855dd\",\"redis_troubleshooting.md\":\"f2149c0b\",\"redis_typed-client.md\":\"8a9faddc\",\"redis_typed-transactions.md\":\"88a6045c\",\"redis_vue-desktop.md\":\"80bab15f\",\"reflection-utils.md\":\"32150e63\",\"register.md\":\"143fb0b7\",\"release-notes-history.md\":\"9f0745db\",\"release-notes-v3.md\":\"7b00d609\",\"release-notes.md\":\"7b6b9bcd\",\"releases_2016-summary.md\":\"b1d6cae0\",\"releases_index.md\":\"d5098553\",\"releases_v4_0_0.md\":\"d4f62644\",\"releases_v4_0_06.md\":\"0196246d\",\"releases_v4_0_08.md\":\"5fdeecef\",\"releases_v4_0_09.md\":\"661f2bb7\",\"releases_v4_0_10.md\":\"f39237f8\",\"releases_v4_0_11.md\":\"b84429d0\",\"releases_v4_0_12.md\":\"162cdff4\",\"releases_v4_0_15.md\":\"a35bbabd\",\"releases_v4_0_18.md\":\"54399e5c\",\"releases_v4_0_19.md\":\"62bcbfbd\",\"releases_v4_0_21.md\":\"e633a0d7\",\"releases_v4_0_22.md\":\"485d57b9\",\"releases_v4_0_23.md\":\"b21c8272\",\"releases_v4_0_24.md\":\"ddc60d2d\",\"releases_v4_0_30.md\":\"c5adf89d\",\"releases_v4_0_31.md\":\"e62520b5\",\"releases_v4_0_32.md\":\"b6903016\",\"releases_v4_0_33.md\":\"0e1870de\",\"releases_v4_0_34.md\":\"2702c055\",\"releases_v4_0_35.md\":\"8fa753c9\",\"releases_v4_0_36.md\":\"b606421d\",\"releases_v4_0_38.md\":\"1c236aa0\",\"releases_v4_0_40.md\":\"d3996a1f\",\"releases_v4_0_42.md\":\"a8872405\",\"releases_v4_0_44.md\":\"a3fe1af7\",\"releases_v4_0_46.md\":\"cb03507b\",\"releases_v4_0_48.md\":\"4a18c203\",\"releases_v4_0_50.md\":\"9281c72f\",\"releases_v4_0_52.md\":\"25db6fe7\",\"releases_v4_0_54.md\":\"9bad5b03\",\"releases_v4_0_56.md\":\"e3274a69\",\"releases_v4_0_58.md\":\"542d45d8\",\"releases_v4_0_60.md\":\"0cf7ee1f\",\"releases_v4_0_62.md\":\"b048ee5e\",\"releases_v4_5_0.md\":\"a3804d7f\",\"releases_v4_5_10.md\":\"1d5db759\",\"releases_v4_5_12.md\":\"16382474\",\"releases_v4_5_14.md\":\"b32d7155\",\"releases_v4_5_2.md\":\"e026ba7a\",\"releases_v4_5_4.md\":\"2316170c\",\"releases_v4_5_6.md\":\"e3c65935\",\"releases_v4_5_8.md\":\"8b17d787\",\"releases_v5_0_0.md\":\"c86e4ae8\",\"releases_v5_10.md\":\"3b3208fa\",\"releases_v5_11.md\":\"4b382344\",\"releases_v5_12.md\":\"eb15ed26\",\"releases_v5_13.md\":\"15687493\",\"releases_v5_1_0.md\":\"a416fd02\",\"releases_v5_2.md\":\"8525e4c4\",\"releases_v5_4.md\":\"1fd204c4\",\"releases_v5_5.md\":\"15b53ee1\",\"releases_v5_6.md\":\"e9289a65\",\"releases_v5_7.md\":\"b156e682\",\"releases_v5_8.md\":\"c8d36db0\",\"releases_v5_9.md\":\"beb0b802\",\"releases_v6.md\":\"eff1b757\",\"request-and-response-filters.md\":\"cc6556f2\",\"request-logger.md\":\"b04425e5\",\"roadmap.md\":\"2db71b7b\",\"routing.md\":\"13597755\",\"search-test.md\":\"0e1064d1\",\"self-hosting.md\":\"7f2a8de8\",\"serialization-deserialization.md\":\"41989a80\",\"server-events-grpc.md\":\"81f99777\",\"server-events.md\":\"c68e890f\",\"server-ui-controls.md\":\"14d378fe\",\"service-complexity-and-dto-roles.md\":\"3cd39796\",\"service-discovery.md\":\"d88ac0ab\",\"service-gateway.md\":\"26d05ecb\",\"service-return-types.md\":\"3342dff5\",\"servicestack-as-daemon-on-linux.md\":\"9a436b3b\",\"servicestack-client-umd.md\":\"3415273c\",\"servicestack-handler-resolution.md\":\"97541858\",\"servicestack-in-fastcgi-hosted-on-nginx.md\":\"b1739f1f\",\"servicestack-integration.md\":\"853cd750\",\"servicestack-side-by-side-with-another-web-framework.md\":\"9f9b6adc\",\"servicify.md\":\"cf97a1ac\",\"sessions.md\":\"eb4770d6\",\"silverlight-client.md\":\"dca8e523\",\"simple-deployments-to-aws.md\":\"21df0a68\",\"simple-ioc.md\":\"6802cd53\",\"sitemaps.md\":\"05e04527\",\"soap-support.md\":\"491bdcc0\",\"ss-utils-js.md\":\"cb27a914\",\"ssl-redis-azure.md\":\"3bfd2bc9\",\"starlibs.md\":\"8ae5c0a7\",\"stripe.md\":\"26e010a7\",\"studio-autoquery.md\":\"bd477462\",\"studio-users.md\":\"52251a2b\",\"studio-validation-rules.md\":\"aea69f41\",\"studio.md\":\"8f4f02eb\",\"svg.md\":\"66063443\",\"swagger-api.md\":\"dc0db2e0\",\"swift-add-servicestack-reference.md\":\"2d93f463\",\"swift.md\":\"52b5eb2b\",\"templates-angular.md\":\"2b40bfdb\",\"templates-angularjs-v15.md\":\"02b6a263\",\"templates-aspnet-empty.md\":\"9a331ede\",\"templates-aws.md\":\"b08494e0\",\"templates-blazor.md\":\"92634f6e\",\"templates-corefx.md\":\"ab6ece39\",\"templates-desktop.md\":\"16b609e6\",\"templates-dotnet-scripts.md\":\"a48f7b22\",\"templates-empty.md\":\"59946c1c\",\"templates-install-servicestackvs.md\":\"00882591\",\"templates-jamstack.md\":\"f122898b\",\"templates-lite.md\":\"d2945b09\",\"templates-nextjs.md\":\"f6494c70\",\"templates-nuxt.md\":\"1737195a\",\"templates-overview.md\":\"f418fb80\",\"templates-react.md\":\"6f0f5af8\",\"templates-single-page-apps.md\":\"6bbda565\",\"templates-spa-components.md\":\"ac41faac\",\"templates-svelte.md\":\"63d528ca\",\"templates-vue.md\":\"e46ca506\",\"templates-vuetify.md\":\"3bc1e4c1\",\"templates-webpack.md\":\"c861ee79\",\"templates-websites.md\":\"63be5d7e\",\"templates-windows-service.md\":\"aa64993d\",\"testing.md\":\"68eed8e2\",\"text.md\":\"94fbcf42\",\"text_index.md\":\"dbef5a08\",\"typescript-add-servicestack-reference.md\":\"521ca7b9\",\"typescript-server-events-client.md\":\"566e02dc\",\"validation.md\":\"1bd148c0\",\"vbnet-add-servicestack-reference.md\":\"589c24db\",\"vbnet.md\":\"8c54082b\",\"versioning.md\":\"6f1412f5\",\"view-and-template-selection.md\":\"66f0b003\",\"virtual-file-system.md\":\"8aefd6a5\",\"vue-components.md\":\"3b051d2e\",\"web-apply.md\":\"1a61abd9\",\"web-new.md\":\"127c83ea\",\"web-services.md\":\"2726cacd\",\"web-tool.md\":\"6bded680\",\"web-trouble.md\":\"a8e7f6a4\",\"webhooks.md\":\"99357217\",\"what-is-a-message-based-web-service.md\":\"ca656b23\",\"why-not-odata.md\":\"6b6d8934\",\"why-not-razor.md\":\"cda3c020\",\"why-remote-services-use-dtos.md\":\"70e94017\",\"why-servicestack.md\":\"eac23bab\",\"wire-format.md\":\"a09f6b0c\",\"world-validation.md\":\"401abdac\",\"your-first-webservice-explained.md\":\"2ac9c615\",\"ztest.md\":\"255c22ca\"}")</script>
    <script type="module" async src="/assets/app.da189b1e.js"></script>
    
  </body>
</html>