<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Managed Files Uploads | Documentation</title>
    <meta name="description" content="ServiceStack Docs">
    <link rel="stylesheet" href="/assets/style.303d3043.css">
    <link rel="modulepreload" href="/assets/chunks/TypeSenseDialog.8cb81fad.js">
    <link rel="modulepreload" href="/assets/chunks/KeyboardEvents.9c4c0cb9.js">
    <link rel="modulepreload" href="/assets/chunks/job-application-attachments.f270e7b5.js">
    <link rel="modulepreload" href="/assets/chunks/create-job-application.00386748.js">
    <link rel="modulepreload" href="/assets/app.65e605c7.js">
    <link rel="modulepreload" href="/assets/locode_files.md.fedee014.lean.js">
    
    <script src="/custom.js"></script>
  <meta name="twitter:title" content="Managed Files Uploads | Documentation">
  <meta property="og:title" content="Managed Files Uploads | Documentation">
  </head>
  <body>
    <div id="app"><div><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Documentation, back to home" data-v-675d8756 data-v-cc01ef16><!----> Documentation</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/locode/" data-v-b8818f8c>Locode <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><button class="flex rounded-full p-0 bg-gray-100 border-solid border-gray-100 text-gray-400 cursor-pointer hover:border-green-400 hover:bg-white hover:text-gray-600"><svg class="w-7 h-7 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-lg mr-1">Search</span><span style="opacity:1;" class="hidden sm:block text-gray-400 text-sm leading-5 py-0 px-1.5 my-0.5 mr-1.5 border border-gray-300 border-solid rounded-md"><span class="sr-only">Press </span><kbd class="font-sans">/</kbd><span class="sr-only"> to search</span></span></button><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/locode/" data-v-b8818f8c>Locode <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Introduction</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/">Getting Started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/database-first">Database-First</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/code-first">Code-First</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">C# Development Model</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/declarative">Declarative Attributes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/programmatic">Code Customizations</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/branding">Branding &amp; Appearance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/formatters">Format Functions</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Custom HTML/JS</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/custom">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/custom-forms">Custom Forms</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/custom-components">Custom Components</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">File Management</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/locode/files">Overview</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#basic-file-upload-example">Basic File Upload Example</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#using-file-upload-locations-in-apis">Using File Upload Locations in APIs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#auto-form-uis">Auto Form UIs</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#managed-multi-file-upload-example">Managed Multi File Upload example</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#integrates-with-autoquery-crud">Integrates with AutoQuery CRUD</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uploaded-file-metadata-populated-in-complex-type-properties">Uploaded File Metadata populated in Complex Type properties</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uploading-files-from-c">Uploading Files from C#</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#using-httpclient-multipartformdatacontent">Using HttpClient MultipartFormDataContent</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#versatile-multi-part-content-type-apis">Versatile Multi Part Content Type APIs</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uploading-files-from-js-typescript">Uploading Files from JS/TypeScript</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#substitutable-virtual-file-providers">Substitutable Virtual File Providers</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#memory-virtual-file-sources">Memory Virtual File Sources</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#configuring-database-first-apps">Configuring Database-First Apps</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/files-blazor">File Blazor Demo</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/files-upload-filesystem">File System</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/files-upload-aws">AWS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/files-upload-azure">Azure</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Features</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/auditing">Auditing</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/locode/advanced">Advanced</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--[--><!----><!--]--><!--[--><h1>Managed Files Uploads</h1><!--]--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>The <code>FileUploadFeature</code> plugin is a high-level ServiceStack feature that allows you to configure multiple managed file upload locations within the same App that you can declaratively bind to different APIs to use.</p><div class="py-8 max-w-7xl mx-auto px-4 sm:px-6"><iframe class="video-hd" width="560" height="315" src="https://www.youtube.com/embed/5sd00MzHpaU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p>Upload Locations can be configured to use any of the supported <a href="/virtual-file-system#writable-virtual-file-system">Writable Virtual File Systems</a> including:</p><ul><li><code>FileSystemVirtualFiles</code> - Hard-disk or Network Files and Directories from a specified directory</li><li><code>S3VirtualFiles</code> - Files stored on Amazon&#39;s S3 Managed File Storage in <a href="https://github.com/ServiceStack/ServiceStack.Aws#s3virtualfiles" target="_blank" rel="noopener noreferrer">ServiceStack.Aws</a></li><li><code>AzureBlobVirtualFiles</code> - Files stored on Azure&#39;s Managed Blob Storage in <a href="https://github.com/ServiceStack/ServiceStack.Azure" target="_blank" rel="noopener noreferrer">ServiceStack.Azure</a></li><li><code>GistVirtualFiles</code> - Files persisted to a GitHub Gist</li><li><code>MemoryVirtualFiles</code> - Temporary Virtual Files and Folders that last for the lifetime of the AppHost</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Additional support for external file storages can be added by <a href="/virtual-file-system#implementing-a-new-virtual-file-system">Implementing a new Virtual File System</a></p></div><p>Managed file uploads is a generic feature any ServiceStack HTTP API can use by declaratively annotating it on Request DTOs. It&#39;s especially useful in <a href="/autoquery-crud">AutoQuery CRUD APIs</a> as it enables an easy way to populate a file path that can be stored along with a table row without the uploaded files embedded in the database itself, taking up valuable RDBMS resources and significantly impacting its performance.</p><h2 id="basic-file-upload-example" tabindex="-1">Basic File Upload Example <a class="header-anchor" href="#basic-file-upload-example" aria-hidden="true">#</a></h2><p>To demonstrate how to use the Managed File Uploads feature we&#39;ll look at handling the basic example of uploading files to publicly accessible <code>/wwwroot</code> folder location. This is what the <a href="https://talent.locode.dev" target="_blank" rel="noopener noreferrer">talent.locode.dev</a> Demo uses to handle profile image uploads for Contacts and Users in different locations in its <a href="https://github.com/NetCoreApps/TalentBlazor/blob/main/TalentBlazor/Configure.AppHost.cs" target="_blank" rel="noopener noreferrer">Configure.AppHost.cs</a>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> wwwrootVfs <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetVirtualFileSource</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FileSystemVirtualFiles<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FilesUploadFeature</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;profiles&quot;</span><span class="token punctuation">,</span> wwwrootVfs<span class="token punctuation">,</span> <span class="token named-parameter punctuation">allowExtensions</span><span class="token punctuation">:</span>FileExt<span class="token punctuation">.</span>WebImages<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ctx <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;/profiles/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span> wwwrootVfs<span class="token punctuation">,</span> <span class="token named-parameter punctuation">allowExtensions</span><span class="token punctuation">:</span>FileExt<span class="token punctuation">.</span>WebImages<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ctx <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;/profiles/users/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>UserAuthId</span><span class="token punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileExtension</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>As both locations are uploaded to the App&#39;s <code>/wwwroot</code> folder they&#39;ll be immediately accessible after they&#39;re uploaded. Contact profile images are saved using their uploaded FileName whilst User profiles are saved in a predictable location against their User Id and uploaded File Extension type.</p><p>The only default restriction placed on File Uploads is that they can only be performed by Authenticated Users. Each <code>UploadLocation</code> is able to use the several configuration options available to further restrict file uploads by file type, count, size, number of uploads or a custom validation function. In this instance Talent Blazor is restricting uploads in <code>allowExtensions</code> to only Images supported by Browsers, which is a server validation that also gets propagated to the client to limit the user to only be able to select from the server-configured file extensions:</p><p><img src="/assets/upload-accept.8ae2b759.png" alt=""></p><p>To simplify configuration <a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/src/ServiceStack/FilesUploadFeature.cs" target="_blank" rel="noopener noreferrer">we&#39;ve included</a> a number of pre-configured file extensions for different file types.</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">FileExt</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> WebImages <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gif&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;svg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webp&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> BinaryImages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gif&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bmp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tif&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tiff&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ai&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;psd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ps&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Images <span class="token operator">=</span> WebImages<span class="token punctuation">.</span><span class="token function">CombineDistinct</span><span class="token punctuation">(</span>BinaryImages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> WebVideos <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;avi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;m4v&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mov&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mp4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wmv&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webm&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> WebAudios <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;mp3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mpa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ogg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wav&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wma&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mid&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webm&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> BinaryDocuments <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;doc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;docx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pdf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtf&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> TextDocuments <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;tex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;md&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rst&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Spreadsheets <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;xls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xlsm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xlsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;csv&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;txv&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Presentations <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;odp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pps&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ppt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pptx&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> AllDocuments <span class="token operator">=</span> BinaryDocuments<span class="token punctuation">.</span><span class="token function">CombineDistinct</span><span class="token punctuation">(</span>TextDocuments<span class="token punctuation">,</span> Presentations<span class="token punctuation">,</span> Spreadsheets<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> WebFormats <span class="token operator">=</span> WebImages<span class="token punctuation">.</span><span class="token function">CombineDistinct</span><span class="token punctuation">(</span>WebVideos<span class="token punctuation">,</span> WebAudios<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="using-file-upload-locations-in-apis" tabindex="-1">Using File Upload Locations in APIs <a class="header-anchor" href="#using-file-upload-locations-in-apis" aria-hidden="true">#</a></h3><p>With just the above configuration we can now use them in our APIs, which Talent Blazor does in its <code>CreateContact</code> and <code>UpdateContact</code> <a href="/autoquery-crud">CRUD APIs</a> to handle uploading a contact profiles image when they&#39;re Created and Updated:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Input</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Type <span class="token operator">=</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;profiles&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> SalaryExpectation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> JobType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> AvailabilityWeeks <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">EmploymentType</span> PreferredWorkType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> PreferredLocation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Phone <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPatchDb<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Input</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Type <span class="token operator">=</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;profiles&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> SalaryExpectation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> JobType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> AvailabilityWeeks <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">EmploymentType<span class="token punctuation">?</span></span> PreferredWorkType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> PreferredLocation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Phone <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Input</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Type <span class="token operator">=</span> <span class="token string">&quot;textarea&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">FieldCss</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Field <span class="token operator">=</span> <span class="token string">&quot;col-span-12 text-center&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> About <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Only the <code>[UploadTo(location)]</code> attribute is required to instruct the API to use the specified Upload Location to handle the File Upload. For successful uploads the Uploaded HTTP File will be saved to the configured file path which it populates on the <code>ProfileUrl</code> property which from that point is treated as a normal <code>string</code> property that is validated and stored along with the rest of the DTO properties in the <code>Contact</code> Table.</p><h3 id="auto-form-uis" tabindex="-1">Auto Form UIs <a class="header-anchor" href="#auto-form-uis" aria-hidden="true">#</a></h3><p>In API Explorer &amp; Locode Apps you&#39;ll want to pair this together with <code>[Input(Type=&quot;file&quot;)]</code> to instruct the Auto Form UI to use its File Upload control to handle updating this property, which looks like:</p><p><a href="https://talent.locode.dev/locode/QueryContacts?edit=1" target="_blank" rel="noopener noreferrer"><img src="/assets/update-contact.7cc59840.png" alt=""></a></p><h2 id="managed-multi-file-upload-example" tabindex="-1">Managed Multi File Upload example <a class="header-anchor" href="#managed-multi-file-upload-example" aria-hidden="true">#</a></h2><p>In addition to managing image profiles for its Users and Contacts, Talent Blazor also uses Managed File Uploads to handle accepting an Applicant&#39;s Job Application attachments. A more <a href="https://github.com/NetCoreApps/FileBlazor/blob/main/FileBlazor/Configure.AppHost.cs" target="_blank" rel="noopener noreferrer">advanced configuration</a> is needed for this use-case, that:</p><ul><li>Saves uploaded Applications to the non-servable <strong>~/App_Data</strong> folder</li><li>Limits Job Applications to a maximum of <strong>3 attachments</strong></li><li>Limits Max Upload size to <strong>10mb</strong></li><li>Allows <strong>non-authenticated Users</strong> to upload &amp; download their attachments</li></ul><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> appDataVfs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileSystemVirtualFiles</span><span class="token punctuation">(</span>ContentRootDirectory<span class="token punctuation">.</span>RealPath<span class="token punctuation">.</span><span class="token function">CombineWith</span><span class="token punctuation">(</span><span class="token string">&quot;App_Data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FilesUploadFeature</span><span class="token punctuation">(</span>
    <span class="token comment">//...</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;applications&quot;</span><span class="token punctuation">,</span> appDataVfs<span class="token punctuation">,</span> <span class="token named-parameter punctuation">maxFileCount</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">maxFileBytes</span><span class="token punctuation">:</span> <span class="token number">10_000_000</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ctx <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">GetLocationPath</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Dto <span class="token keyword">is</span> <span class="token class-name">CreateJobApplication</span> create
            <span class="token punctuation">?</span> <span class="token interpolation-string"><span class="token string">$&quot;jobapp/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">create<span class="token punctuation">.</span>JobId</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">create<span class="token punctuation">.</span>ContactId</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
            <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$&quot;app/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>Dto<span class="token punctuation">.</span><span class="token function">GetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">$&quot;/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>DateSegment</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">readAccessRole</span><span class="token punctuation">:</span> RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">,</span> <span class="token named-parameter punctuation">writeAccessRole</span><span class="token punctuation">:</span> RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this case instead of resolving a relative path from <code>/wwwroot</code> it uses <code>ctx.GetLocationPath()</code> to resolve to a managed file location whose access is managed by <code>FilesUploadFeature</code> File Management APIs:</p><table><thead><tr><th>API</th><th>Route</th><th>Description</th></tr></thead><tbody><tr><td><code>StoreFileUpload</code></td><td><strong>POST</strong> <code>/uploads/{Name}</code></td><td>Upload files to the specified managed location</td></tr><tr><td><code>GetFileUpload</code></td><td><strong>GET</strong> <code>/uploads/{Name}/{Path}</code></td><td>Download file from the specified managed location</td></tr><tr><td><code>ReplaceFileUpload</code></td><td><strong>PUT</strong> <code>/uploads/{Name}/{Path}</code></td><td>Overwrite file at the specified managed location</td></tr><tr><td><code>DeleteFileUpload</code></td><td><strong>DELETE</strong> <code>/uploads/{Name}/{Path}</code></td><td>Delete file at the specified managed location</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>/uploads</code> is the default overridable <code>BasePath</code> for <code>FilesUploadFeature</code> managed File APIs</p></div><p>We can now start accepting attachments with our Job Applications by adding <code>[Input(Type=&quot;file&quot;), UploadTo(&quot;applications&quot;)]</code> to the property where we want the Uploaded File metadata populated, when submitting and updating Job Applications:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateJobApplication</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateGreaterThan</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> JobId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateGreaterThan</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ContactId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> AppliedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">JobApplicationStatus</span> ApplicationStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Input</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;applications&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>JobApplicationAttachment<span class="token punctuation">&gt;</span></span> Attachments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateJobApplication</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPatchDb<span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> JobId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> ContactId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> AppliedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">JobApplicationStatus</span> ApplicationStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Input</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;applications&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>JobApplicationAttachment<span class="token punctuation">&gt;</span><span class="token punctuation">?</span></span> Attachments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is all that&#39;s needed to configure our CRUD Services to handle multiple file uploads in Locode &amp; API Explorer:</p><p><img src="/assets/create-job-application.a02a0c08.png" alt=""></p><p>Where the File Input behaves as just another Input control with contextual validation errors displayed when it exceeds any of the configured file restrictions on its Upload Location, e.g:</p><p><img src="/assets/create-job-application-failed.622ee9c9.png" alt=""></p><p>After a successful submission the attachments are uploaded to the configured managed location path which is then used to access the file in the Update Job Application Form UI:</p><p><img src="/assets/update-job-application.e8216dbf.png" alt=""></p><h3 id="integrates-with-autoquery-crud" tabindex="-1">Integrates with AutoQuery CRUD <a class="header-anchor" href="#integrates-with-autoquery-crud" aria-hidden="true">#</a></h3><p>This is another example of how well this generic feature works with the rest of ServiceStack, where without any implementation logic the AutoQuery CRUD API is able to populate a <strong>1 to Many</strong> table relationship to capture the metadata of each uploaded file because the <code>Attachments</code> Request DTO property maps to a <code>[Reference]</code><a href="/ormlite/reference-support">POCO Reference</a> property which automatically populates Foreign Key Reference properties in CRUD APIs.</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JobApplication</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuditBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Reference</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>JobApplicationAttachment<span class="token punctuation">&gt;</span></span> Attachments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JobApplicationAttachment</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">References</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">JobApplication</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> JobApplicationId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FileName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Format</span><span class="token attribute-arguments"><span class="token punctuation">(</span>FormatMethods<span class="token punctuation">.</span>Attachment<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FilePath <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ContentType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Format</span><span class="token attribute-arguments"><span class="token punctuation">(</span>FormatMethods<span class="token punctuation">.</span>Bytes<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> ContentLength <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="uploaded-file-metadata-populated-in-complex-type-properties" tabindex="-1">Uploaded File Metadata populated in Complex Type properties <a class="header-anchor" href="#uploaded-file-metadata-populated-in-complex-type-properties" aria-hidden="true">#</a></h3><p>This also shows that <code>[UploadTo]</code> can either be applied to a <code>string</code> property where it&#39;s just populated with the path the file is uploaded to, or it could contain a <strong>complex type</strong> where any matching properties are populated with metadata of the uploaded file:</p><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>FilePath</td><td>The UploadLocation path where the file is uploaded to</td></tr><tr><td>Name</td><td>The form field name from the Content-Disposition header</td></tr><tr><td>FileName</td><td>The file name of the uploaded file</td></tr><tr><td>ContentLength</td><td>The size in bytes of the uploaded file</td></tr><tr><td>ContentType</td><td>The Content-Type of the uploaded file</td></tr></tbody></table><p>In addition, it also supports <code>List&lt;string&gt;</code> or <code>List&lt;T&gt;</code> complex types for handling <strong>multiple file uploads</strong>, as done in this case.</p><p>All these features work together to achieve our desired result of populating submitted applications in the <code>JobApplicationAttachment</code> joined table, so their metadata can be browsed, queried and navigated like any other related data without file system access and without their contents consuming RDBMS resources:</p><p><img src="/assets/job-application-attachments.22b9dde4.png" alt=""></p><h2 id="uploading-files-from-c" tabindex="-1">Uploading Files from C# <a class="header-anchor" href="#uploading-files-from-c" aria-hidden="true">#</a></h2><p>We can see how Locode gives us instant utility and lets us start submitting file attachments with any AutoQuery CRUD DTO, but as the feature just uses the standard <a href="https://www.ietf.org/rfc/rfc2388.txt" target="_blank" rel="noopener noreferrer">HTTP multipart/form-data</a> Content-Type, we can use the existing <a href="/csharp-client">Service Client APIs</a> for uploading files as demonstrated in Talent Blazor&#39;s <a href="https://github.com/NetCoreApps/TalentBlazor/blob/main/TalentBlazor.Tests/FileUploadTests.cs" target="_blank" rel="noopener noreferrer">FileUploadTests.cs</a> which uploads a single attachment when creating a Contact with a Profile Image and multiple file attachments when submitting a Job Application:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> profileImg <span class="token operator">=</span> <span class="token keyword">await</span> ProfileImageUrl<span class="token punctuation">.</span><span class="token function">GetStreamFromUrlAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> contact <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PostFileWithRequestAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>profileImg<span class="token punctuation">,</span> <span class="token string">&quot;cody-fisher.png&quot;</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateContact</span>
    <span class="token punctuation">{</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;Cody&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;Fisher&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;cody.fisher@gmail.com&quot;</span><span class="token punctuation">,</span>
        JobType <span class="token operator">=</span> <span class="token string">&quot;Security&quot;</span><span class="token punctuation">,</span>
        PreferredLocation <span class="token operator">=</span> <span class="token string">&quot;Remote&quot;</span><span class="token punctuation">,</span>
        PreferredWorkType <span class="token operator">=</span> EmploymentType<span class="token punctuation">.</span>FullTime<span class="token punctuation">,</span>
        AvailabilityWeeks <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        SalaryExpectation <span class="token operator">=</span> <span class="token number">100_000</span><span class="token punctuation">,</span>
        About <span class="token operator">=</span> <span class="token string">&quot;Lead Security Associate&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">fieldName</span><span class="token punctuation">:</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateContact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// contact.ProfileUrl = /profiles/cody-fisher.png</span>

<span class="token class-name"><span class="token keyword">var</span></span> uploadedImage <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span>BaseUri<span class="token punctuation">.</span><span class="token function">CombineWith</span><span class="token punctuation">(</span>contact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetStreamFromUrlAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> coverLetter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileInfo</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">AppData</span><span class="token punctuation">}</span></span><span class="token string">/sample_coverletter.pdf&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> resume <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileInfo</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">AppData</span><span class="token punctuation">}</span></span><span class="token string">/sample_resume.pdf&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> attachmentsField <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateJobApplication<span class="token punctuation">.</span>Attachments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> uploadAttachments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span>coverLetter<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> coverLetter<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> attachmentsField<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span>resume<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> coverLetter<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> attachmentsField<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span>contact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">.</span><span class="token function">LastRightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uploadedImage<span class="token punctuation">,</span> attachmentsField<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> jobApp <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PostFilesWithRequestAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateJobApplication</span> <span class="token punctuation">{</span>
        JobId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        AppliedDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
        ContactId <span class="token operator">=</span> contact<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> uploadAttachments<span class="token punctuation">)</span><span class="token punctuation">;</span>

uploadAttachments<span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Stream<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This example also shows APIs are able to submit files from any <code>Stream</code> that can be sourced from anywhere, including the HTTP Response stream of a Remote URI or files from a local hard drive.</p><h3 id="using-httpclient-multipartformdatacontent" tabindex="-1">Using HttpClient MultipartFormDataContent <a class="header-anchor" href="#using-httpclient-multipartformdatacontent" aria-hidden="true">#</a></h3><p>The introduction of <a href="/csharp-client#jsonapiclient">.NET 6+ JsonApiClient</a> lets us provide an even more flexible approach by utilizing <code>MultipartFormDataContent()</code> which we&#39;ve enhanced with high-level extension methods to enable a Fluent API for constructing custom API Requests populated from multiple sources, which can be sent using its <code>ApiForm*</code> methods:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> profileImg <span class="token operator">=</span> <span class="token keyword">await</span> ProfileImageUrl<span class="token punctuation">.</span><span class="token function">GetStreamFromUrlAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> createContact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MultipartFormDataContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddParams</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateContact</span>
    <span class="token punctuation">{</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;Cody&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;Fisher&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;cody.fisher@gmail.com&quot;</span><span class="token punctuation">,</span>
        JobType <span class="token operator">=</span> <span class="token string">&quot;Security&quot;</span><span class="token punctuation">,</span>
        PreferredLocation <span class="token operator">=</span> <span class="token string">&quot;Remote&quot;</span><span class="token punctuation">,</span>
        PreferredWorkType <span class="token operator">=</span> EmploymentType<span class="token punctuation">.</span>FullTime<span class="token punctuation">,</span>
        AvailabilityWeeks <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        SalaryExpectation <span class="token operator">=</span> <span class="token number">100_000</span><span class="token punctuation">,</span>
        About <span class="token operator">=</span> <span class="token string">&quot;Lead Security Associate&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateContact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;cody-fisher.png&quot;</span><span class="token punctuation">,</span> profileImg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> contactApi <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ApiFormAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CreateContact</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToApiUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> createContact<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// contactApi.Succeeded = true</span>
<span class="token class-name"><span class="token keyword">var</span></span> contact <span class="token operator">=</span> contactApi<span class="token punctuation">.</span>Response<span class="token operator">!</span><span class="token punctuation">;</span>
<span class="token comment">// contact.ProfileUrl   = /profiles/cody-fisher.png</span>

<span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> uploadedImage <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span>BaseUri<span class="token punctuation">.</span><span class="token function">CombineWith</span><span class="token punctuation">(</span>contact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetStreamFromUrlAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> coverLetter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileInfo</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">AppData</span><span class="token punctuation">}</span></span><span class="token string">/sample_coverletter.pdf&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> resume <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileInfo</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">AppData</span><span class="token punctuation">}</span></span><span class="token string">/sample_resume.pdf&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> attachmentsField <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateJobApplication<span class="token punctuation">.</span>Attachments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> createJobApp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MultipartFormDataContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddParams</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateJobApplication</span> <span class="token punctuation">{</span>
        JobId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        AppliedDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
        ContactId <span class="token operator">=</span> contact<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span>attachmentsField<span class="token punctuation">,</span> coverLetter<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span>attachmentsField<span class="token punctuation">,</span> resume<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span>attachmentsField<span class="token punctuation">,</span> contact<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">.</span><span class="token function">LastRightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uploadedImage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> jobAppApi <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ApiFormAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>JobApplication<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CreateJobApplication</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToApiUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> createJobApp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// jobAppApi.Succeeded = true</span>
<span class="token class-name"><span class="token keyword">var</span></span> jobApp <span class="token operator">=</span> jobAppApi<span class="token punctuation">.</span>Response<span class="token operator">!</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>All <code>JsonApiClient</code> Async APIs also have <a href="/csharp-client#safe-sync-httpclient-apis">safe sync equivalents</a> when access outside an async method is needed</p></div><h3 id="versatile-multi-part-content-type-apis" tabindex="-1">Versatile Multi Part Content Type APIs <a class="header-anchor" href="#versatile-multi-part-content-type-apis" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/tests/ServiceStack.WebHost.Endpoints.Tests/AutoQueryCrudTests.References.cs" target="_blank" rel="noopener noreferrer">AutoQueryCrudTests.References.cs</a> also showcases how we can take advantage of <code>MultipartFormDataContent</code> to construct custom requests using a combination of different Content Type sources, including single and multiple file attachments within a single request:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultipartRequest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPost</span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>MultipartRequest<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> String <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">// Complex types sent as JSV by default</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Contact</span> Contact <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MultiPartField</span><span class="token attribute-arguments"><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Json<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">PhoneScreen</span> PhoneScreen <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MultiPartField</span><span class="token attribute-arguments"><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Csv<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span> Contacts <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;profiles&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UploadTo</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;applications&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>UploadedFile<span class="token punctuation">&gt;</span></span> UploadedFiles <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><a href="/serialization-deserialization">Complex types are sent using JSV</a> by default which is a more human &amp; wrist-friendly and more efficient format than JSON, however we could also take advantage of the flexibility in HTTP <strong>multipart/form-data</strong> requests to construct an HTTP API Request utilizing multiple Content-Type&#39;s optimized for the data we&#39;re sending, e.g:</p><ul><li>JSON/JSV more optimal for hierarchical graph data</li><li>CSV more optimal for sending tabular data</li><li>File Uploads are more optimal for sending large files</li></ul><p>To facilitate this in our Server APIs we can use <code>[MultiPartField]</code> attribute to instruct ServiceStack which registered serializer it should use to deserialize the form-data payload, whilst we can continue using the generic <code>[UploadTo]</code> attribute in normal APIs to handle our File Uploads and populate the Request DTO with the uploaded file metadata.</p><p>Our <code>MultipartFormDataContent</code> extension methods simplifies our client logic by allowing us to easily populate this custom request in a single Fluent construction expression:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MultipartFormDataContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddParam</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddParam</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddParam</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>Contact<span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Contact</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> FirstName <span class="token operator">=</span> <span class="token string">&quot;First&quot;</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">&quot;Last&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddJsonParam</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>PhoneScreen<span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PhoneScreen</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> JobApplicationId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Notes <span class="token operator">=</span> <span class="token string">&quot;The Notes&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddCsvParam</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>Contacts<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Contact</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> FirstName <span class="token operator">=</span> <span class="token string">&quot;First2&quot;</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">&quot;Last2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Contact</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> FirstName <span class="token operator">=</span> <span class="token string">&quot;First3&quot;</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">&quot;Last3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>ProfileUrl<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;profile.txt&quot;</span><span class="token punctuation">,</span> file1Stream<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>UploadedFiles<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;uploadedFiles1.txt&quot;</span><span class="token punctuation">,</span> file2Stream<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddFile</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MultipartRequest<span class="token punctuation">.</span>UploadedFiles<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;uploadedFiles2.txt&quot;</span><span class="token punctuation">,</span> file3Stream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> api <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ApiFormAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MultipartRequest<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MultipartRequest</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToApiUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>api<span class="token punctuation">.</span>Succeeded<span class="token punctuation">)</span> api<span class="token punctuation">.</span>Error<span class="token punctuation">.</span><span class="token function">PrintDump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="uploading-files-from-js-typescript" tabindex="-1">Uploading Files from JS/TypeScript <a class="header-anchor" href="#uploading-files-from-js-typescript" aria-hidden="true">#</a></h2><p>Similarly, we can populate custom requests by either programmatically constructing the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer">FormData</a> object, which also benefits from native integration in browsers where it can be populated directly from an HTML Form:</p><div class="language-ts"><pre><code><span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span>
<span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> api <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">apiForm</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MultipartRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> formData<span class="token punctuation">)</span>
</code></pre></div><p>Where <code>apiForm</code> can be used to submit <code>FormData</code> requests for normal API Requests, or <code>apiFormVoid</code> for <code>IReturnVoid</code> API requests.</p><h2 id="substitutable-virtual-file-providers" tabindex="-1">Substitutable Virtual File Providers <a class="header-anchor" href="#substitutable-virtual-file-providers" aria-hidden="true">#</a></h2><p>We&#39;ve also created the <a href="https://file.locode.dev" target="_blank" rel="noopener noreferrer">File Blazor Demo</a> to further demonstrate the versatility of the <code>FilesUploadFeature</code> to seamlessly manage uploading files to multiple different locations using different Virtual Files providers that&#39;s still able to utilize the same custom configuration and validation in its <a href="https://github.com/NetCoreApps/FileBlazor/blob/main/FileBlazor/Configure.AppHost.cs" target="_blank" rel="noopener noreferrer">Configure.AppHost.cs</a>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> appFs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileSystemVirtualFiles</span><span class="token punctuation">(</span>ContentRootDirectory<span class="token punctuation">.</span>RealPath<span class="token punctuation">.</span><span class="token function">CombineWith</span><span class="token punctuation">(</span><span class="token string">&quot;App_Data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AssertDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> s3Client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AmazonS3Client</span><span class="token punctuation">(</span>awsAccessKeyId<span class="token punctuation">,</span> awsSecretAccessKey<span class="token punctuation">,</span> RegionEndpoint<span class="token punctuation">.</span>USEast1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> s3DataVfs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">S3VirtualFiles</span><span class="token punctuation">(</span>s3Client<span class="token punctuation">,</span> <span class="token string">&quot;file-blazor-demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> azureBlobVfs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AzureBlobVirtualFiles</span><span class="token punctuation">(</span>azureBlobConnString<span class="token punctuation">,</span> <span class="token string">&quot;file-blazor-demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FilesUploadFeature</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;azure&quot;</span><span class="token punctuation">,</span> azureBlobVfs<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">readAccessRole</span><span class="token punctuation">:</span> RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">,</span> <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ResolveUploadPath<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">validateUpload</span><span class="token punctuation">:</span> ValidateUpload<span class="token punctuation">,</span> <span class="token named-parameter punctuation">validateDownload</span><span class="token punctuation">:</span> ValidateDownload<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;s3&quot;</span><span class="token punctuation">,</span> s3DataVfs<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">readAccessRole</span><span class="token punctuation">:</span> RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">,</span> <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ResolveUploadPath<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">validateUpload</span><span class="token punctuation">:</span> ValidateUpload<span class="token punctuation">,</span> <span class="token named-parameter punctuation">validateDownload</span><span class="token punctuation">:</span> ValidateDownload<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">,</span> appFs<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">readAccessRole</span><span class="token punctuation">:</span> RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">,</span> <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ResolveUploadPath<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">validateUpload</span><span class="token punctuation">:</span> ValidateUpload<span class="token punctuation">,</span> <span class="token named-parameter punctuation">validateDownload</span><span class="token punctuation">:</span> ValidateDownload<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ResolveUploadPath</span><span class="token punctuation">(</span><span class="token class-name">FilesUploadContext</span> ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    ctx<span class="token punctuation">.</span>Dto <span class="token keyword">is</span> <span class="token class-name">IAppFile</span> <span class="token punctuation">{</span> FileAccessType<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> createFile
        <span class="token punctuation">?</span> createFile<span class="token punctuation">.</span>FileAccessType <span class="token operator">!=</span> <span class="token return-type class-name">FileAccessType<span class="token punctuation">.</span>Private
            <span class="token punctuation">?</span></span> ctx<span class="token punctuation">.</span><span class="token function">GetLocationPath</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">createFile<span class="token punctuation">.</span>FileAccessType</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">:</span> ctx<span class="token punctuation">.</span><span class="token function">GetLocationPath</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">createFile<span class="token punctuation">.</span>FileAccessType</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>UserAuthId</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid file creation request.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ValidateUpload</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">IHttpFile</span> file<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Dto <span class="token keyword">is</span> <span class="token class-name">IAppFile</span> createFile<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> accessType <span class="token operator">=</span> createFile<span class="token punctuation">.</span>FileAccessType<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> ext <span class="token operator">=</span> file<span class="token punctuation">.</span>FileName<span class="token punctuation">.</span><span class="token function">LastRightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>accessType <span class="token operator">==</span> FileAccessType<span class="token punctuation">.</span>Gallery <span class="token operator">&amp;&amp;</span> ext <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> FileExt<span class="token punctuation">.</span>Images<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Supported file extensions: {0}&quot;</span><span class="token punctuation">.</span><span class="token function">LocalizeFmt</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> 
                <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span> FileExt<span class="token punctuation">.</span>Images<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token string character">&#39;.&#39;</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>FileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpError</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid request.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//...</span>
</code></pre></div><h3 id="memory-virtual-file-sources" tabindex="-1">Memory Virtual File Sources <a class="header-anchor" href="#memory-virtual-file-sources" aria-hidden="true">#</a></h3><p>ServiceStack AppHost&#39;s are configured with an empty Memory VFS which can be used to transiently prepopulate App files from external sources on Startup or maintain temporary working files with the same lifetime of the App without needing to persist to disk.</p><p>They&#39;re also a great solution for Integration Testing managed file access without creating any persistent artifacts as done in <a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/tests/ServiceStack.WebHost.Endpoints.Tests/AutoQueryCrudTests.References.cs" target="_blank" rel="noopener noreferrer">AutoQueryCrudTests.References.cs</a></p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> memFs <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetVirtualFileSource</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MemoryVirtualFiles<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FilesUploadFeature</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;profiles&quot;</span><span class="token punctuation">,</span> memFs<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;applications&quot;</span><span class="token punctuation">,</span> memFs<span class="token punctuation">,</span> <span class="token named-parameter punctuation">maxFileCount</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">maxFileBytes</span><span class="token punctuation">:</span> <span class="token number">10_000_000</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">resolvePath</span><span class="token punctuation">:</span> ctx <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">GetLocationPath</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Dto <span class="token keyword">is</span> <span class="token class-name">CreateJobApplication</span> create
            <span class="token punctuation">?</span> <span class="token interpolation-string"><span class="token string">$&quot;job/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">create<span class="token punctuation">.</span>JobId</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
            <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$&quot;app/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>Dto<span class="token punctuation">.</span><span class="token function">GetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">$&quot;/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>DateSegment</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ctx<span class="token punctuation">.</span>FileName</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">readAccessRole</span><span class="token punctuation">:</span>RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">,</span> <span class="token named-parameter punctuation">writeAccessRole</span><span class="token punctuation">:</span>RoleNames<span class="token punctuation">.</span>AllowAnon<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="configuring-database-first-apps" tabindex="-1">Configuring Database-First Apps <a class="header-anchor" href="#configuring-database-first-apps" aria-hidden="true">#</a></h2><p>As <a href="/locode/database-first">Database-First Types</a> are only generated &amp; exist at runtime they can&#39;t be explicitly annotated with <code>[UploadTo]</code> attributes, instead they can be added dynamically at runtime by using AutoQuery&#39;s <code>TypeFilter</code> which is invoked for all Types including Request and Response DTO types.</p><p>An <a href="https://github.com/NetCoreApps/NorthwindAuto/blob/master/Configure.AppHost.cs" target="_blank" rel="noopener noreferrer">example of this</a> can be found in the <code>Northwind</code> Locode Database-First demo which uses <code>type.Name == &quot;Employee&quot;</code> to match on the <code>Employee</code> Data Model and <code>IsCrudCreateOrUpdate(&quot;Employee&quot;)</code> Metadata Type extension method to target its <code>CreateEmployee</code> and <code>UpdateEmployee</code> CRUD APIs:</p><div class="language-csharp"><pre><code>TypeFilter <span class="token operator">=</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;Employee&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Remove embedded Blob column from Data Model Type </span>
        type<span class="token punctuation">.</span>Properties<span class="token punctuation">.</span><span class="token function">RemoveAll</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;Photo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">IsCrudCreateOrUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;Employee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Add `[Input]` and `[UploadTo]` attributes to `PhotoPath` managed file upload property</span>
        type<span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span><span class="token string">&quot;PhotoPath&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddAttribute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">InputAttribute</span> <span class="token punctuation">{</span> Type <span class="token operator">=</span> Input<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>File <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddAttribute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UploadToAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;employees&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The result of this is converting the Northwind Database from using the <code>Photo</code> blob column to persist image bit maps and instead uses the <code>PhotoPath</code> column to maintain an external file reference to their Profile Photo which is managed by the <code>FilesUploadFeature</code> to persist images to its configured <code>FileSystemVirtualFiles</code> virtual file source.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><a class="link" href="https://github.com/ServiceStack/docs/edit/master/docs/locode/files.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/locode/custom-components" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Custom Components</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/locode/files-blazor" data-v-38ede35f><span class="text" data-v-38ede35f>File Blazor Demo</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"access-http-specific-features-in-services.md\":\"b20e8586\",\"add-servicestack-reference.md\":\"30566e80\",\"adhoc-utils.md\":\"a9499aa1\",\"admin-ui-features.md\":\"888876cc\",\"admin-ui-profiling.md\":\"67eb59f2\",\"admin-ui-users.md\":\"95f432f4\",\"admin-ui-validation.md\":\"60e9d7f0\",\"admin-ui.md\":\"21f50b88\",\"advanced-deployment-octopus-deploy.md\":\"f700dd13\",\"advantages-of-message-based-web-services.md\":\"4b931a33\",\"amazon-sqs-mq.md\":\"b7a633b2\",\"api-design.md\":\"e719cb03\",\"api-explorer.md\":\"1c3a64c1\",\"api-first-development.md\":\"fccd4492\",\"api-key-authprovider.md\":\"ab8bedd2\",\"appsettings.md\":\"b6f6c2d1\",\"architecture-overview.md\":\"6cb46104\",\"artists.md\":\"6aa342b4\",\"auth-anti-forgery.md\":\"a1a04b2f\",\"auth-openid.md\":\"d4675481\",\"auth-repository.md\":\"d5b5eefd\",\"auth-restricting-services.md\":\"30cc6f90\",\"auth-signin-with-apple.md\":\"0c124b02\",\"auth.md\":\"ffe5db70\",\"authentication-and-authorization.md\":\"ded91967\",\"authentication-identity-aspnet.md\":\"84886b12\",\"authentication-identity-servicestack.md\":\"2f1168ea\",\"authentication-identityserver.md\":\"64a1e465\",\"auto-batched-requests.md\":\"a3fbd7b9\",\"auto-mapping.md\":\"e44153c2\",\"autoquery-audit-log.md\":\"129e651f\",\"autoquery-autogen.md\":\"e728156f\",\"autoquery-crud-bookings.md\":\"2317fa30\",\"autoquery-crud.md\":\"93935924\",\"autoquery-data.md\":\"4442d3b7\",\"autoquery-dynamodb.md\":\"c7db3c0d\",\"autoquery-memory.md\":\"936d2cdd\",\"autoquery-rdbms.md\":\"888eb7ab\",\"autoquery-service.md\":\"2e673eb9\",\"autoquery.md\":\"9d2bb646\",\"aws-getting-started.md\":\"186d42c9\",\"aws-pocodynamo.md\":\"0e2e92ab\",\"aws.md\":\"dbff9f1b\",\"azure-service-bus-mq.md\":\"74680d86\",\"azure.md\":\"bf64f81f\",\"background-mq.md\":\"218ae695\",\"benchmarks.md\":\"4f48150b\",\"blazor-litestream.md\":\"a4192dd4\",\"built-in-profiling.md\":\"558c00ec\",\"bundling-and-minification.md\":\"e78cd1b2\",\"cache-aware-clients.md\":\"d3ecb277\",\"cacheresponse-attribute.md\":\"28a7658b\",\"caching.md\":\"e1d15804\",\"cancellable-requests.md\":\"4cf6cc5b\",\"clients-overview.md\":\"581f749a\",\"code-contribution-guide.md\":\"0d6ae7dd\",\"community-resources.md\":\"4bd76db6\",\"compiled-razor-views.md\":\"cc305004\",\"compression.md\":\"531b607f\",\"concurrency-model.md\":\"1860450a\",\"config-api.md\":\"0b6e006e\",\"contributing.md\":\"82949188\",\"contributors.md\":\"99d013e9\",\"corsfeature.md\":\"c816d1bf\",\"create-webservice-from-scratch.md\":\"afeb284c\",\"create-your-first-webservice.md\":\"d42ef09c\",\"csharp-add-servicestack-reference.md\":\"d0584c2a\",\"csharp-client.md\":\"1de13fb7\",\"csharp-server-events-client.md\":\"dc1cf5a3\",\"csv-format.md\":\"723611bb\",\"customize-http-responses.md\":\"35c8d593\",\"customize-json-responses.md\":\"1dcc8110\",\"dart-add-servicestack-reference.md\":\"d47eb684\",\"dart-client.md\":\"ecd7396b\",\"debugging.md\":\"55e2b864\",\"declarative-validation.md\":\"5642e555\",\"deploy-multiple-sites-to-aws.md\":\"ca80290e\",\"deploy-netcore-docker-aws-ecs.md\":\"a2a05ac2\",\"deploy-netcore-to-amazon-linux-2-ami.md\":\"31525c54\",\"design-message-based-apis.md\":\"f2bff235\",\"design-rest-services.md\":\"708310c6\",\"do-github-action-mix-deployment.md\":\"6221bea7\",\"dotnet-new.md\":\"d0d5855e\",\"dotnet-tool.md\":\"192b6670\",\"dump-utils.md\":\"adf4166c\",\"encrypted-messaging.md\":\"b7a07ea9\",\"endpoints.md\":\"8a42e54d\",\"error-handling.md\":\"b64d6b71\",\"explore-servicestack.md\":\"f1a7c5eb\",\"filter-attributes.md\":\"9c261182\",\"form-hijacking-prevention.md\":\"1ba3e485\",\"formats.md\":\"76eb14e8\",\"fsharp-add-servicestack-reference.md\":\"5833dee0\",\"fsharp.md\":\"cfa951cc\",\"github-action-templates.md\":\"7cef4415\",\"grpc-android.md\":\"d8a1f998\",\"grpc-csharp.md\":\"87f73626\",\"grpc-dart.md\":\"1a4a9d93\",\"grpc-flutter.md\":\"38166b4b\",\"grpc-generic.md\":\"259f49f9\",\"grpc-go.md\":\"d239041d\",\"grpc-java.md\":\"460aeb8c\",\"grpc-nodejs.md\":\"9f635a0c\",\"grpc-php.md\":\"53ce8960\",\"grpc-python.md\":\"fe2e11cf\",\"grpc-ruby.md\":\"a8bd16a5\",\"grpc-ssl.md\":\"8e2c4412\",\"grpc-swift.md\":\"4dd656f8\",\"grpc.md\":\"32b82204\",\"host-configuration.md\":\"d92623ba\",\"hot-reloading.md\":\"37c10502\",\"how-to-contribute.md\":\"ed927122\",\"howto-write-unit-integration-tests.md\":\"b303cb82\",\"html-css-and-javascript-minification.md\":\"97e31ba7\",\"html5reportformat.md\":\"25fd2a1a\",\"http-caching.md\":\"704e7960\",\"http-utils.md\":\"2151ee2e\",\"iis.md\":\"0e296a19\",\"index.md\":\"4e294e65\",\"install-rabbitmq-windows.md\":\"b9b72e84\",\"install-redis-windows.md\":\"0f72ce3b\",\"ioc.md\":\"8880a3c2\",\"jamstack-with-vitepress-servicestack.md\":\"8a68c1da\",\"jamstacks-net.md\":\"15bcf72e\",\"java-add-servicestack-reference.md\":\"098863bb\",\"java-server-events-client.md\":\"3b5b5822\",\"java.md\":\"11352b13\",\"javascript-add-servicestack-reference.md\":\"e1ebee44\",\"javascript-client.md\":\"23109941\",\"javascript-server-events-client.md\":\"c95e1976\",\"js-utils.md\":\"b9204084\",\"json-format.md\":\"871ff217\",\"json-jsv-and-xml.md\":\"9b329c54\",\"jsv-format.md\":\"ceb1fbd4\",\"jupyter-notebooks-csharp.md\":\"879510e0\",\"jupyter-notebooks-fsharp.md\":\"525da883\",\"jupyter-notebooks-python.md\":\"fd3aa86c\",\"jupyter-notebooks-reporting.md\":\"d41d2b1c\",\"jupyter-notebooks.md\":\"979e6198\",\"jwt-authprovider.md\":\"8fcdb362\",\"kotlin-add-servicestack-reference.md\":\"744fee85\",\"learning-servicestack.md\":\"523e6d0b\",\"linux-hosting-options.md\":\"0c8cc0dd\",\"lisp-tcp-repl-server.md\":\"c3e486c9\",\"litestream-templates.md\":\"2d81972f\",\"locode_advanced.md\":\"d20cce7d\",\"locode_auditing.md\":\"0d1a5d3e\",\"locode_branding.md\":\"d4831d56\",\"locode_code-first.md\":\"77105abd\",\"locode_custom-components.md\":\"adc5db03\",\"locode_custom-forms.md\":\"f8247873\",\"locode_custom.md\":\"21499a43\",\"locode_database-first.md\":\"eb9dbc03\",\"locode_declarative.md\":\"9ef32261\",\"locode_files-blazor.md\":\"f1ce5a4f\",\"locode_files-upload-aws.md\":\"e3b14ad6\",\"locode_files-upload-azure.md\":\"57bd7711\",\"locode_files-upload-filesystem.md\":\"addbfe37\",\"locode_files.md\":\"fedee014\",\"locode_formatters.md\":\"93f17b9f\",\"locode_index.md\":\"589c3bd6\",\"locode_input.md\":\"b58dd758\",\"locode_programmatic.md\":\"2f19db41\",\"locode_relations.md\":\"c696010c\",\"logging.md\":\"e6fbd9f3\",\"markdown-razor.md\":\"fc0a8406\",\"messagepack-format.md\":\"cf5f6932\",\"messaging.md\":\"4e7c8c42\",\"metadata-page.md\":\"01341371\",\"mix-github-actions-aws-ecs.md\":\"c5ea0613\",\"mix-tool.md\":\"4ad10368\",\"modular-startup-legacy.md\":\"ce6a3cd4\",\"modular-startup.md\":\"17206878\",\"modularizing-services.md\":\"f71bf7d4\",\"mono-repo.md\":\"ad5e9f9e\",\"mono.md\":\"13b2bbb0\",\"multitenancy.md\":\"800cdba7\",\"mvc-integration.md\":\"2edf558c\",\"myget.md\":\"77767c4b\",\"navigation.md\":\"f31147cc\",\"netcore-deploy-rsync.md\":\"098ccd82\",\"netcore-localhost-cert.md\":\"afd93f56\",\"netcore-razor.md\":\"f356908d\",\"netcore-redis.md\":\"7c285d24\",\"netcore-windows-desktop.md\":\"99443023\",\"netcore.md\":\"141e1a75\",\"nhibernate.md\":\"a820431b\",\"npm-new.md\":\"04214683\",\"nuget.md\":\"891243a1\",\"openapi.md\":\"79d19029\",\"order-of-operations.md\":\"68a20e27\",\"ormlite.md\":\"7e948667\",\"ormlite_apis_delete.md\":\"288056d9\",\"ormlite_apis_insert.md\":\"927a57dd\",\"ormlite_apis_schema.md\":\"d86888f5\",\"ormlite_apis_select.md\":\"1a3f965c\",\"ormlite_apis_update.md\":\"80ece23b\",\"ormlite_async-apis.md\":\"a66e374e\",\"ormlite_autogen-t4.md\":\"8eae23e0\",\"ormlite_aws-rds-databases.md\":\"7cbedf44\",\"ormlite_complex-type-serializers.md\":\"64bca822\",\"ormlite_custom-sql-features.md\":\"39038d00\",\"ormlite_custom-sql.md\":\"6e80ef42\",\"ormlite_customer-orders-example.md\":\"57739ad6\",\"ormlite_dictionary-apis.md\":\"a076c9b9\",\"ormlite_dynamic-result-sets.md\":\"39d2cbba\",\"ormlite_ensure-apis.md\":\"56f86a9b\",\"ormlite_filters.md\":\"20283ad6\",\"ormlite_getting-started.md\":\"a0b07339\",\"ormlite_index.md\":\"cc0a57e7\",\"ormlite_installation.md\":\"228d1cc1\",\"ormlite_introspection.md\":\"ed0e88c2\",\"ormlite_limitations.md\":\"d3e481fc\",\"ormlite_litestream.md\":\"7db32dc4\",\"ormlite_multi-database-connections.md\":\"0fe373ae\",\"ormlite_optimistic-concurrency.md\":\"40ee9a0e\",\"ormlite_ormlite-apis.md\":\"b7a7d7fb\",\"ormlite_ormlite-utils.md\":\"f9cd47c6\",\"ormlite_postgres-features.md\":\"76fc4f82\",\"ormlite_reference-support.md\":\"30cad256\",\"ormlite_shippers-example.md\":\"d260573f\",\"ormlite_sql-server-features.md\":\"40708392\",\"ormlite_stored-procedures.md\":\"a6af8415\",\"ormlite_type-converters.md\":\"cf364991\",\"ormlite_typed-joins.md\":\"8a3876ea\",\"ormlite_untyped-apis.md\":\"5c8f68e0\",\"oss.md\":\"f779fe5e\",\"physical-project-structure.md\":\"8faac4c4\",\"plugins.md\":\"c12c6ce0\",\"post-command.md\":\"d3073188\",\"postman.md\":\"39d7a320\",\"prerequisites.md\":\"6fb38418\",\"protobuf-format.md\":\"1a8f7d03\",\"proxy-feature.md\":\"16c9cb38\",\"python-add-servicestack-reference.md\":\"18b05137\",\"rabbit-mq.md\":\"de1bf2ae\",\"razor-notes.md\":\"7074f565\",\"razor-ui-controls.md\":\"f2ca82d3\",\"razor-views-vs-content-pages.md\":\"5a0f0247\",\"real-world-performance.md\":\"8be4c6d8\",\"redis-mq.md\":\"074e109f\",\"redis-server-events.md\":\"69832835\",\"redis.md\":\"1de2b1f0\",\"redis_async.md\":\"03c04f74\",\"redis_automatic-retries.md\":\"c8b4f0ff\",\"redis_client-managers.md\":\"19ceb13c\",\"redis_client-usage.md\":\"8ba85324\",\"redis_client.md\":\"3011d36c\",\"redis_custom-commands.md\":\"57fa3a8d\",\"redis_design-nosql.md\":\"bb0da111\",\"redis_distributed-locking.md\":\"840d6f75\",\"redis_index.md\":\"a8c41097\",\"redis_lua.md\":\"efcae789\",\"redis_pubsub.md\":\"b9bab54c\",\"redis_schemaless-migration.md\":\"649467f8\",\"redis_sentinel.md\":\"7b867191\",\"redis_stats.md\":\"14e5cf47\",\"redis_transactions.md\":\"45390d4d\",\"redis_troubleshooting.md\":\"d5cc1809\",\"redis_typed-client.md\":\"62520462\",\"redis_typed-transactions.md\":\"34d0a6ab\",\"redis_vue-desktop.md\":\"5e531e3b\",\"reflection-utils.md\":\"312357e7\",\"register.md\":\"580ee8f6\",\"release-notes-history.md\":\"684e8ad6\",\"release-notes-v3.md\":\"a69784a0\",\"release-notes.md\":\"1d2819c9\",\"releases_2016-summary.md\":\"791be5a9\",\"releases_index.md\":\"0342b938\",\"releases_v4_0_0.md\":\"bba7684a\",\"releases_v4_0_06.md\":\"08b1609b\",\"releases_v4_0_08.md\":\"38c94281\",\"releases_v4_0_09.md\":\"87a707bc\",\"releases_v4_0_10.md\":\"a5431d1d\",\"releases_v4_0_11.md\":\"25000c7d\",\"releases_v4_0_12.md\":\"82cc8b20\",\"releases_v4_0_15.md\":\"2d015b27\",\"releases_v4_0_18.md\":\"ade99f7a\",\"releases_v4_0_19.md\":\"fd41d02d\",\"releases_v4_0_21.md\":\"48b7fa4d\",\"releases_v4_0_22.md\":\"5d0fb68b\",\"releases_v4_0_23.md\":\"e997df76\",\"releases_v4_0_24.md\":\"1a285144\",\"releases_v4_0_30.md\":\"332d5986\",\"releases_v4_0_31.md\":\"f72eb8a5\",\"releases_v4_0_32.md\":\"f8489b0d\",\"releases_v4_0_33.md\":\"4bad4e43\",\"releases_v4_0_34.md\":\"3dd3198c\",\"releases_v4_0_35.md\":\"6eb3e93a\",\"releases_v4_0_36.md\":\"787ea8eb\",\"releases_v4_0_38.md\":\"2c18d213\",\"releases_v4_0_40.md\":\"75a2899f\",\"releases_v4_0_42.md\":\"6a089313\",\"releases_v4_0_44.md\":\"fb49015a\",\"releases_v4_0_46.md\":\"3e33efaa\",\"releases_v4_0_48.md\":\"e66ec9dc\",\"releases_v4_0_50.md\":\"b49731fb\",\"releases_v4_0_52.md\":\"a1b806bb\",\"releases_v4_0_54.md\":\"3637fc6f\",\"releases_v4_0_56.md\":\"fcc61990\",\"releases_v4_0_58.md\":\"4cb167c8\",\"releases_v4_0_60.md\":\"cb8959af\",\"releases_v4_0_62.md\":\"661b799d\",\"releases_v4_5_0.md\":\"d04740b8\",\"releases_v4_5_10.md\":\"a3c449e3\",\"releases_v4_5_12.md\":\"06f2a184\",\"releases_v4_5_14.md\":\"b8dba765\",\"releases_v4_5_2.md\":\"97b6bc5b\",\"releases_v4_5_4.md\":\"d440b0c2\",\"releases_v4_5_6.md\":\"5570e40f\",\"releases_v4_5_8.md\":\"3dcf131f\",\"releases_v5_0_0.md\":\"8b4a038d\",\"releases_v5_10.md\":\"5f5bc9af\",\"releases_v5_11.md\":\"f23c5400\",\"releases_v5_12.md\":\"7038a71c\",\"releases_v5_13.md\":\"87b10f1d\",\"releases_v5_1_0.md\":\"b67c479b\",\"releases_v5_2.md\":\"e040b5b4\",\"releases_v5_4.md\":\"734c4415\",\"releases_v5_5.md\":\"7b064d32\",\"releases_v5_6.md\":\"6e286f80\",\"releases_v5_7.md\":\"70d09451\",\"releases_v5_8.md\":\"cfb402f8\",\"releases_v5_9.md\":\"8860076d\",\"releases_v6.md\":\"3227bae6\",\"releases_v6_1.md\":\"57fbde63\",\"releases_v6_2.md\":\"732f8f40\",\"request-and-response-filters.md\":\"5c606587\",\"request-logger.md\":\"55f207e0\",\"roadmap.md\":\"14836e15\",\"routing.md\":\"8a6e562c\",\"search-test.md\":\"aa9e7f2a\",\"self-hosting.md\":\"7fe3f3d0\",\"serialization-deserialization.md\":\"84bdabc2\",\"server-events-grpc.md\":\"a4c57023\",\"server-events.md\":\"962f8227\",\"server-ui-controls.md\":\"5f7d8442\",\"service-complexity-and-dto-roles.md\":\"53ba17bf\",\"service-discovery.md\":\"7f9ba0a3\",\"service-gateway.md\":\"c69a0eb9\",\"service-return-types.md\":\"1c57a9c1\",\"servicestack-as-daemon-on-linux.md\":\"3d359acd\",\"servicestack-client-umd.md\":\"a1798613\",\"servicestack-handler-resolution.md\":\"b4a8ae04\",\"servicestack-in-fastcgi-hosted-on-nginx.md\":\"bd42b72b\",\"servicestack-integration.md\":\"898d5949\",\"servicestack-side-by-side-with-another-web-framework.md\":\"9d91f49a\",\"servicify.md\":\"24de417f\",\"sessions.md\":\"4d15c892\",\"silverlight-client.md\":\"a15e6ebf\",\"simple-deployments-to-aws.md\":\"200477cb\",\"simple-ioc.md\":\"d7f027a3\",\"sitemaps.md\":\"a412f644\",\"soap-support.md\":\"aea6d305\",\"ss-utils-js.md\":\"d22906ea\",\"ssl-redis-azure.md\":\"d26c05f5\",\"starlibs.md\":\"0eec1001\",\"stripe.md\":\"4f053155\",\"studio-autoquery.md\":\"c72dae19\",\"studio-users.md\":\"1f315166\",\"studio-validation-rules.md\":\"fa179667\",\"studio.md\":\"49ae6089\",\"svg.md\":\"0134a3f8\",\"swagger-api.md\":\"312556a1\",\"swift-add-servicestack-reference.md\":\"16823582\",\"swift.md\":\"43b0a9ab\",\"templates-angular.md\":\"575b5e07\",\"templates-angularjs-v15.md\":\"de8ca771\",\"templates-aspnet-empty.md\":\"78e51e62\",\"templates-aws.md\":\"cc8410dc\",\"templates-blazor-tailwind.md\":\"6c7bb880\",\"templates-blazor.md\":\"97f0a740\",\"templates-corefx.md\":\"f8e20028\",\"templates-desktop.md\":\"2da70baf\",\"templates-dotnet-scripts.md\":\"4e702c5b\",\"templates-empty.md\":\"6724a059\",\"templates-install-servicestackvs.md\":\"acee708a\",\"templates-jamstack.md\":\"6f764b85\",\"templates-lite.md\":\"48a4d1f9\",\"templates-mvc.md\":\"635909cb\",\"templates-nextjs.md\":\"ef1b5eab\",\"templates-nuxt.md\":\"2310e2ba\",\"templates-overview.md\":\"b36aab90\",\"templates-react.md\":\"28047fa2\",\"templates-single-page-apps.md\":\"9f218f6c\",\"templates-spa-components.md\":\"cd5f3080\",\"templates-svelte.md\":\"875b1f90\",\"templates-vue.md\":\"2503ed49\",\"templates-vuetify.md\":\"db574d64\",\"templates-webpack.md\":\"68b9e066\",\"templates-websites.md\":\"0e964041\",\"templates-windows-service.md\":\"eee7922d\",\"testing.md\":\"7c49b4e4\",\"text.md\":\"67f455b8\",\"text_index.md\":\"a6656d56\",\"typescript-add-servicestack-reference.md\":\"e50f25a8\",\"typescript-server-events-client.md\":\"6b3549f6\",\"validation.md\":\"91eb745e\",\"vbnet-add-servicestack-reference.md\":\"20698ad7\",\"vbnet.md\":\"0e47f105\",\"versioning.md\":\"403ba6f6\",\"view-and-template-selection.md\":\"7367fbbe\",\"virtual-file-system.md\":\"89aec75e\",\"vue-components.md\":\"f736535e\",\"web-apply.md\":\"b1d5000c\",\"web-new.md\":\"e508d7c1\",\"web-services.md\":\"3ad8ea61\",\"web-tool.md\":\"a02cc3f0\",\"web-trouble.md\":\"5699712f\",\"webhooks.md\":\"7381d47d\",\"what-is-a-message-based-web-service.md\":\"ff0eb885\",\"why-not-odata.md\":\"35c12ee4\",\"why-not-razor.md\":\"03e55d3f\",\"why-remote-services-use-dtos.md\":\"6b61a227\",\"why-servicestack.md\":\"bff82b2b\",\"wire-format.md\":\"73058666\",\"world-validation.md\":\"c0059bb9\",\"your-first-webservice-explained.md\":\"0e940f71\",\"ztest.md\":\"30123550\"}")</script>
    <script type="module" async src="/assets/app.65e605c7.js"></script>
    
  </body>
</html>